# Architecture
## 2022-01-22 Sat

### 경계선
* 아키텍쳐는 소프트웨어 요소를 분리하는 경계선을 긋는 기술이다.
* 경계선에 의해 분리된 요소는 서로 분리되어 경계선 너머의 요소에 대해 알 수 없어야 한다.
* 아키텍트의 목표는 필요한 시스템을 만들고 유지하는 데 드는 인적 자원을 최소화하는 것이다.
  * 이 때, 인적 자원의 **효율을 떨어트리는 것은 너무 이른 결정에 따른 결합**이다.
  * 이른 결정이란, 시스템의 요구사항이나 유즈케이스와 아무런 관련이 없는 결정이다.
    * 대표적으로 프레임워크, 데이터베이스, 웹 서버, 등이 포함된다.
* 좋은 아키텍쳐는 이러한 결정이 부수적이고, 결정을 연기할 수 있는 아키텍쳐이다.
  * 즉, 좋은 시스템 아키텍쳐는 이러한 결정 사항에 전혀 의존하지 않고 최후의 순간에 결정을 내릴 수 있도록 한다.
  * 나아가 최후의 순간에 내려진 결정에 따른 영향도 크지 않게 만들어 준다.
* 경계선을 긋는 행위는 결정을 늦추고 연기하는 데에 큰 도움이 되고, 좋은 아키텍쳐에는 필수적이다.

### 선긋기
* 관련이 있는 것과 없는 것 사이에 선을 긋는다.
* 예를 들어, 업무 규칙과 데이터베이스는 관련이 없으므로 선을 그어야 한다.
  * 데이터베이스는 업무 규칙이 간접적으로 사용하는 도구에 불과하다.
  * 업무 규칙이 알아야하는 것은 **데이터를 가져오고 저장하기 위해 사용할 수 있는 함수 집합인 인터페이스가 있다는 사실이 전부**이다.
  * 이러한 함수 집합을 활용하여 우리는 인터페이스 뒤에 데이터베이스를 숨기고, 업무 규칙이 알 수 없도록 할 수 있다.
  * 업무 규칙은 함수 집합인 인터페이스를 활용하여 데이터에 접근하고, 실제 데이터베이스에 접근하기 위한 클래스는 해당 인터페이스를 구현한다.
  * 이 때, 경계선은 상속 관계를 횡단하며 클래스와 인터페이스 사이에 그어진다.
  * 업무 규칙 컴포넌트는 데이터베이스 컴포넌트와 얽힌 문제가 없지만, 데이터베이스 컴포넌트는 업무 규칙 컴포넌트 없이는 존재할 수 없다.
* 업무 규칙과 데이터베이스, 두 컴포넌트 사이에 그어진 경계선에 의해 업무 규칙 컴포넌트는 어떤 종류의 데이터베이스도 사용할 수 있게 된다.
  * 데이터베이스 컴포넌트는 다양한 구현체로 교체될 수 있게 되었다. 이에 업무 규칙 컴포넌트는 전혀 신경쓰지 않아도 된다!
  * 이는 곧 데이터베이스에 대한 결정을 연기할 수 있음을 의미하며, 데이터베이스를 결정하기에 앞서 업무 규칙을 먼저 작성하고 테스트에 집중할 수 있음을 의미한다.
* 경계선은 '변경의 축'이 있는 지점에 그어진다.
  * **경계의 한 쪽에 위치한 컴포넌트는 경계의 반대편에 위치한 컴포넌트와는 다른 속도로, 다른 이유에 의해 변경**된다.
  * 이 역시 **순전히 단일 책임 원칙에 해당**한다. 단일 책임 원칙은 어디에 경계가 필요한지를 명확하게 전달해준다.
* 아키텍쳐에서 경계선을 그리려면, 우선 시스템을 컴포넌트 단위로 분할해야 한다.
  * 일부 컴포넌트는 핵심 업무 규칙일 것이며, 나머지 컴포넌트는 플러그인의 형태를 띄어 핵심 업무 규칙과 직접적인 연관이 없지만 필수 기능을 포함하게 된다.
  * 이후 컴포넌트 사이의 화살표가 핵심 업무를 향하도록 컴포넌트를 배치한다.
  * **이는 전적으로 의존성 역전 원칙과 안정된 추상화 원칙을 응용한 것에 해당**한다.
    * **의존성 화살표는 항상 저수준 세부사항에서 고수준의 추상화를 향하도록 배치**되어야 한다.

### 플러그인 아키텍쳐
* 소프트웨어 개발 기술의 역사는 플러그인을 손쉽게 생성하고, 확장 가능하고 유지보수가 쉬운 시스템 아키텍쳐를 확립할 수 있도록 만드는 방법이다.
* 선택적이거나 **다양한 형태로 구현될 수 있는 컴포넌트들로부터 핵심적인 업무 규칙 컴포넌트는 분리되어 있고, 독립적이어야 한다**.
* 상술한 예시에서, 데이터베이스는 플러그인 형태로 고려되었기에 어떠한 형태의 데이터베이스도 적용할 수 있다. 또한, 필요시 대체할 수도 있다.
  * 마찬가지로 UI 컴포넌트 역시 플러그인 아키텍쳐를 구현함으로써 웹 기반, 클라이언트 - 서버 기반, SOA나 콘솔 기반 등 어떠한 인터페이스 기술도 적용할 수 있을 것이다.
* UI 또는 데이터베이스 컴포넌트 교체 작업이 사소하지 않더라도, 경계선을 통한 플러그인 아키텍쳐의 확립은 이러한 변경 작업을 현실성 있게 만든다.
* 우리는 시스템에서 한 부분이 변경되더라도, 관련 없는 나머지 부분이 망가지기를 원하지 않는다.
  * 즉, 특정 모듈이 나머지 모듈에 영향받지 않아야 한다.
  * 시스템을 플러그인 아키텍쳐로 배치하면 변경 사항이 전파될 수 없는 가상의 방화벽을 만들 수 있다.
  * 상술한 예시에서, 데이터베이스는 업무 규칙에 플러그인 형태로 연결되었으므로 절대 업무 규칙에 영향을 줄 수 없다.
