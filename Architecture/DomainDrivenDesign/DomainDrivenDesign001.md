# DomainDrivenDesign
## 2022-04-26 Tue

## 도메인 주도 설계
```
> 도메인 주도 설계는 개발자에게 있어 엔지니어링에 대한 관점을 완전히 바꿀 수 있도록 하는 깨달음을 줄 수 있다.
```
* 도메인 주도 설계의 개념은 단순하다.
  1. 비즈니스 상의 문제를 해결하기 위해 비즈니스를 이해하고,
  2. 비즈니스를 표현하고,
  3. 비즈니스와 코드를 연결하여 지속적으로 개량해갈 수 있도록 만드는 것이다.
* 도메인 주도 설계에서 자주 마주치는 용어는 크게 다음과 같이 분류할 수 있다.
  1. 모델링: 소프트웨어에서 중요한 개념을 추출하기 위한 개념이다.
  2. 패턴: 개념을 세부 구현에 녹여내는 방법이다.
* 모델링의 경우 이론을 이해하고 실천하면서 배워나가야 하지만, 패턴은 코드로 표현된 예제를 통해 이해할 수 있다.

### 도메인 주도 설계란?
```
> 도메인 주도 설계는 가치 있는 지식을 코드에 녹일 수 있도록 하는 개념이다.
```
* 도메인 주도 설계는 다음과 같은 전제를 갖는다.
  1. 소프트웨어를 개발하는 과정에서는 언제나 새로운 분야를 익히게 되며, 이 과정에서 얻은 지식은 범용적이거나 특수한 목적을 가질 수 있다.
  2. 개발자는 기본적으로 소프트웨어를 사용하는 사람의 환경에 대해 무지하며, 사용자의 환경에 대해 배워가며 얻은 지식은 대부분 개발에는 유용하지 못하다.
* **소프트웨어 사용자에게 유용한 소프트웨어를 개발하려면, 가치가 있는 지식과 그렇지 않은 지식을 신중하게 구분해야 한다**.
  * 개발자는 이렇게 구분된 가차 있는 지식만을 코드에 녹여 넣어야 한다.
  * **이를 토대로 작성된 코드는 유용한 지식만을 골라 정리해둔 문서와도 같다**.
* 소프트웨어를 개발하는 과정에서 가치가 있는 지식만을 구분하려면 다음과 같은 능력이 필요하다.
  1. 우선, 소프트웨어 사용자의 환경을 잘 이해하고 있어야 한다.
  2. 이를 토대로 사용자의 문제가 무엇인지 파악하고, 이를 해결하기 위한 최선의 수단을 강구한다.
* **도메인 주도 설계는 이러한 고찰을 반복하는 설계를 통해 사용자의 세계와 코드를 연결 짓는 것에 그 목적**을 두는 기법이다.

## 도메인 지식에 초점을 맞추는 설계
```
> 도메인 주도 설계는 말 그대로 도메인 지식에 초점을 맞추는 설계 기법이다.
```
### 도메인이란 무엇인가?
* 도메인은 영역이라는 뜻을 갖지만, **소프트웨어 개발 분야에서는 프로그램이 사용되는 대상 분야라는 의미**를 갖는다.
* 그러나 단어적 의미보다 중요한 것은 도메인에 포함되는 것은 무엇인지를 이해하는 것이다.
* **도메인에 포함되는 개념은 시스템의 대상 분야에 따라 크게 달라질 수 있다**.
  * 회계 시스템의 경우, 금전 또는 장부와 같은 개념이 필요하다.
  * 물류 시스템의 경우, 화물이나 창고, 또는 운송 수단과 같은 개념이 필요하다.
  * 이 때, **시스템을 구성하기 위해 필요한 각 개념은 각각의 도메인에 포함되어야 하는 요소**이다.

### 지식에 초점을 맞춘다는 것은 무엇인가?
* **소프트웨어에는 반드시 이를 사용하는 사용자가 있으며, 소프트웨어의 목적은 이들이 직면한 문제를 해결하는 것**이다.
* 사용자가 직면한 문제를 해결하기 위해서는 당연히 그들의 문제를 정확히 이해하고 있어야 한다.
  * 즉, **사용자가 처한 환경을 이해하기 위해 그들의 도메인을 접해야 한다**.
* 상술한 이유에서, 소프트웨어 개발에는 반드시 다음과 같은 과정이 필요하다.
  1. 도메인에 속하는 개념과 사건을 이해한다.
  2. 그 중에서 문제를 해결하기 위해 유용한 지식을 추려낸다.
  3. 추려낸 지식을 소프트웨어에 반영한다.
* 그러나 **이러한 과정은 개발자들이 놓치기 쉬운 부분이며, 기술을 중시하는 개발자는 문제를 파악하는 과정 없이 기술적으로만 접근하는 경향**이 있다.
  * 결국 기술에만 집중하여 목적이 없는 소프트웨어가 만들어지게 된다.
* **이러한 참사를 막기 위해서는 반드시 소프트웨어가 사용될 분야인 도메인의 지식에 초점을 맞추어야 한다**.
* **주의 깊게 관찰하고, 이 과정에서 배운 지식을 표현하여 소프트웨어에 반영하는 것은 개발 과정의 일부여야 한다**.
```
> 도메인 주도 설계에서 소개하는 내용은 당연히 해야할 일을 돕는 수단이 되어준다.
```

### 도메인 모델링이란 무엇인가?
* 근본적으로 모델이란, 현실에서 일어나는 사건이나 개념을 추상화한 것이다.
  * 여기서 **추상화란, 여러 사물 또는 개념으로부터 공통적인 것만 뽑아내 파악한 것**이다.
* 모델은 추상화를 전제하므로, 현실의 모든 것을 하나하나 반영하는 개념이 아니다.
* **상황에 따라 어떤 것을 버리고 어떤 것을 반영할지 취사선택이 필요하며, 이 과정에서 도메인은 선택의 기준**이 되어준다.
  * 도메인이 모델에 영향을 주므로, 현실 속에서는 같은 대상이라도 도메인에 따라 모델은 달라질 수 있다.
* 도메인 개념을 빈틈없이 표현하는 것은 매우 어려운 일이고, 이를 제약이 많은 코드로 표현하는 것은 더 어려운 일이다.
* 그러나 **코드로 나타낼 대상을 소프트웨어가 임무를 다하기 위해 필요한 정보만으로 한정한다면, 이를 현실화하는 데에는 문제가 없다**.
  * 이렇듯 **사건 또는 개념의 정보를 취사선택하여 추상화하는 작업을 모델링**이라고 한다.
* **도메인 주도 설계의 경우, 도메인 개념을 모델링한 결과를 도메인 모델**이라고 한다.
* 도메인 모델은 다음과 같은 이유에서 미리 정해진 것이 아니다.
  1. 도메인 분야의 관계자는 도메인에 대한 개념은 있으나, 소프트웨어 지식은 없다.
  2. 개발자는 소프트웨어 지식은 있으나, 도메인 개념에 대한 지식은 없다.
* 때문에 **도메인 문제를 해결하는 소프트웨어를 개발하려면 각 분야의 사람들이 협력하여 도메인 모델을 정의해야 한다**. 

### 도메인 객체란 무엇인가?
* 도메인 모델은 어디까지나 개념을 추상화한 것에 불과하므로, 이것만으로는 직면한 문제를 해결할 수 없다.
  * 즉, 도메인 모델은 어떠한 매체를 통해 표현된 후에야 문제를 해결할 수 있는 힘을 얻게 된다.
* 이 때, **도메인 모델을 소프트웨어의 형태로 동작하는 모듈로 작성한 것이 도메인 객체**이다.
* 모든 도메인 모델을 각각 도메인 객체로 구현할 필요는 없으며, 개발자는 정말 필요하고 유용한 모델을 구분할 수 있어야 한다.
  * 공들여 도메인 객체로 구현한 도메인 모델이 문제 해결과 관련이 없는 경우, 이는 쓸데없이 시간을 낭비한 것에 지나지 않는다.
* 소프트웨어 사용자가 처한 세계는 동적이지 않으며, 시간에 따라 변해가기 마련이다.
* **도메인 객체가 도메인 모델을 충실히 반영했다면, 이러한 도메인의 변화를 코드로 쉽게 옮겨 수정할 수 있다**.
  * 즉, 도메인 개념이 투영된 도메인 모델은 도메인의 변화를 충실히 반영할 수 있다.
* **도메인에 발생한 변화는 우선 도메인 모델로 전달되어야 하며, 도메인 모델에 전달된 변화는 연쇄적으로 도메인 객체에 다다른다**.
* 반대로, 도메인 객체가 도메인에 대한 태도를 변화시킬 수도 있다.
  * 예를 들어 도메인 객체를 구현하는 과정에서 도메인에 대한 어중간한 이해가 드러난 경우에 해당한다.
  * 이 경우 구현을 위해 도메인 모델을 직시하고, 나아가 도메인 개념을 추상화하는 방식을 바꿔야 하는 경우가 생길 수 있다.
  * 즉, **도메인에 대한 통찰은 도메인 모델링 뿐만 아니라 도메인 객체의 구현 과정에서도 얻어낼 수 있다**.
```
> 도메인 개념과 도메인 객체는 도메인 모델을 통해 연결되며, 반복적인 개발 과정에서 서로에게 영향을 주고 받으며 실현된다.
```