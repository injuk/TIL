# Tdd
## 2022-08-07 Sun
## 필요 없는 것은 지우기
### 테스트 코드의 제거
* 리팩토링을 통해 중복을 제거하는 과정에서, 때로는 클래스 자체를 삭제할 필요가 있다.
  * **이 경우, 해당 클래스를 검증하기 위해 존재했던 테스트 코드 역시 함께 삭제하는 것이 바람직**하다. 
  * 이렇듯 기존에는 필요했지만 리팩토링 등의 이유로 인해 더 이상 필요 없게 된 테스트는 적시에 제거해도 무방하다.
* **테스트 코드 역시 개발자가 유지 보수해야할 자산이며, 마찬가지 이유에서 중복 제거의 대상**이 된다.

## 메타포
### 커다란 기능을 작은 메타포로 나누기
* 테스트 대상 기능이 너무 커 어떻게 구현해야할 지 감이 잡히지 않는 경우, 우선 이를 작은 테스트로 줄이는 방식으로 접근한다.
* 이렇게 **나누어진 작은 테스트는 여러 연산으로 이루어지며, 이러한 연산 각각에 대해 적절할 메타포를 신중히 고민할 수 있게 된다**.
  * 이 때, **선정된 메타포는 각각 대응되는 객체가 될 수 있다**.
  * 최초로 선정했던 메타포의 이름이 다소 어색하게 느껴질 수는 있으나, 이는 어디까지나 객체의 이름에 불과하므로 추후에 더 좋은 메타포로 대체할 수 있다.
* 이렇게 추려진 메타포를 기반으로 기존의 테스트를 수정하며, 이후로트는 테스트를 컴파일하고 실행하는 기존 TDD의 주기를 따를 수 있다.

### 통찰을 지원하는 TDD
* 설계 상 어려운 제약을 마주쳤을 때, TDD는 명쾌한 통찰을 보장해주지는 못한다.
  * **대신 확신을 주는 테스트와 잘 정리된 코드를 통해, 통찰에 대한 준비와 통찰을 적용할 준비를 할 수 있다**.

## 테스트 코드 품질 높이기
### 모든 중복을 제거하기
```
> 현재 작업 중인 코드 상의 모든 중복이 제거되기 전까지 테스트에 완료 처리를 할 수는 없다.
```
* 테스트 코드 역시 우리가 관리해야 할 자산이므로, 높은 품질을 유지할 방법을 고려해야 한다.
* 예를 들어, **테스트 역시 테스트 대상의 내부 구현에 깊게 관여하지 않아야 한다**.
  * 이러한 특징은 테스트의 유연성을 떨어트리며, 대신 테스트 대상이 제공하는 연산의 외부 행위에 집중해야 한다.
* **테스트 대상 메소드가 클래스를 명시적으로 검사하여 달리 동작하는 식으로 구현되었다면, 다형성을 적용하도록 수정**할 수 있다.
  * 이를 통해 지저분한 캐스팅과 클래스 검사 코드를 모두 제거할 수 있다.
  * 반면, 단순히 테스트를 통과하기 위해 빠르게 구현하는 것이 목적이라면 우선 캐스팅을 활용하여 테스트를 성공시킨 후에 리팩토링해도 무방하다.