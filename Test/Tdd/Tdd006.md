# Tdd
## 2022-08-11 Thu
### 어떻게 테스트할 것인가?
* 어떻게 테스트할 지 알 수 있으려면, 우선 다음과 같은 항목에 대해 답할 수 있어야 한다.
  1. 테스트한다는 것은 무엇일까?
  2. 테스트는 언제 해야할까?
  3. 테스트 대상 로직은 어떻게 선정할 것인가?
  4. 테스트 대상 데이터는 어떻게 선정할 것인가?

### 테스트
```
> 작성한 소프트웨어를 테스트하기 위해서는 반드시 자동화된 테스트를 만들어야 한다.
```
* 모든 개발자는 아무리 작은 변화라도 테스트하지 않고 릴리즈하지는 않으며, 반드시 테스트를 진행한다.
  * 그러나 **변화를 테스트하는 것과 자동화된 테스트를 갖고 있는 것은 전혀 같지 않다**.

### 자동화된 테스트
* 스트레스와 테스트의 실행은 다음과 같은 밀접한 연관 관계를 갖는다.
  1. 스트레스를 많이 받으면 테스트를 더 적게 수행하게 된다.
  2. 테스트 코드를 더 적게 작성하게 되면, 개발자가 만들어내는 에러는 점점 많아진다.
  3. 에러가 많아지만, 개발자는 더 많은 스트레스를 받게 된다.
  4. 반복된다.
* 이러한 **양성 피드백 고리에서 빠져나오기 위해서는 단순한 테스트의 수행을 자동화된 테스트로 치환할 필요**가 있다.
* 테스트는 개발자의 두려움을 지루함으로 바꾸어주며, 스트레스를 받기 시작할 때 실행할 수 있는 상태를 유지한다.
  * 즉, **스트레스를 더 많이 받을수록 테스트를 더 자주 실행하게 되며 이로 인해 에러의 발생 가능성을 줄일 수 있다**.

### 바빠서 테스트할 시간이 없다
* 상술한 이유로 인해 스트레스를 더 많이 받을수록 결국 실패하게 된다.
  * 즉, 테스트를 능동적으로 수행하지 않는 프로젝트는 성공을 보장할 수 없다.
* 반면, **자동화된 테스트가 있는 경우에는 두려움의 정도를 개발자가 스스로 선택할 수 있게 된다**.

### 격리된 테스트
```
> 테스트의 실행은 서로에 대해 아무런 영향을 주지 않아야 한다.
```
* 이상적인 테스트는 다음과 같은 특징을 가져야 한다.
  1. **충분히 빨라 개발자가 직접, 자주 실행할 수 있어야 한다**.
  2. **하나의 테스트가 실패한 것으로 다른 테스트가 영향을 받지 않아야 한다**.
* 이로 인해 **테스트는 전체 애플리케이션을 대상으로 동작하기 보다는 더 작은 단위를 테스트하는 것이 바람직**하다.
  * 또한, **각각의 테스트는 다른 테스트들과 완전히 독립적이어야** 한다.
* 이렇듯 격리된 테스트를 작성하는 데에 성공하게 된다면, 테스트는 실행 순서에도 독립적이게 된다.
  * 즉, **테스트의 선행 순서를 걱정하지 않고도 일부만을 실행할 수 있어야 한다**.
* **테스트를 격리하는 작업은 결과적으로 시스템의 응집도는 높으면서도, 결합도는 낮은 객체의 모음으로 구성되도록 한다**. 
* **일반적으로 이러한 방식으로 시스템을 설계하는 것은 어렵지만, 격리된 테스트를 수행하는 습관을 들이면 자연스레 시스템을 이상적인 방향으로 설계**하게 된다.

### 테스트 목록
```
> 작업을 시작하기 전에 우선 작성해야 할 테스트의 목록을 모두 적어둔다.
```
* 스트레스를 줄이는 접근법의 처음은 작업의 방향이 확실해지기 전까지는 전진하지 않는 것이다.
* 개발 과정에서 발생하는 새로운 일은 지금 할 일일지, 나중에 해도 되는 일에 속하거나 아예 필요하지 않은 일인지 결정한다
  * 구현해야할 모든 것을 목록화하고, 우선 구현할 필요가 있다면 오퍼레이션의 사용 예시를 작성한다.
  * 그 다음으로 아직 존재하지 않는 오퍼레이션의 널 버전을 목록에 작성한다.
  * **마지막으로는 깔끔한 코드를 얻기 위해, 해당 작업을 끝내기 전에 반드시 해야할 리팩토링 목록을 작성**한다.
* **테스트를 통과하는 과정에서 개발자가 작성하는 코드에는 새로운 테스트가 필요함을 암시적으로 알리는 부분이 존재**한다.
  * 이러한 새 테스트 역시 리팩토링과 마찬기지로 할 일 목록에 작성해야 한다.

### 신중한 등반
* 신중한 등반가들은 두 다리와 두 팔중 셋은 항상 고정하는 규칙을 따른다.
* 이는 **순수한 TDD에서, 초록 막대 상태에서는 한 번에 하나만 수정하는 규칙과 유사**한 점이 있다.

### 세션이 완료된 후
```
> 제대로 작동하지 않는 테스트를 생각해냈다면, 이를 제대로 통과하도록 만드는 것이 코드 릴리즈보다 더 중요하다.
```
* 세션이 완료되었을 때까지도 목록에 남아 있는 항목들은 따로 신경써서 관리하는 것이 바람직하다.
  * 예를 들어 어떠한 기능을 하나 진행하는 중인 경우, 다음 번 세션에서도 같은 목록을 사용할 수 있다.
* 현재 작업 범위를 넘어서는 큰 리팩토링 목표는 다음 할 일 목록으로 옮길 수 있다.