# Tdd
## 2022-08-04 Thu
## 끔찍한 구현
### 우선 '돌아가기만' 하게 하기
* 몇 번이고 되짚어보지만, 테스트 주도 개발 주기에는 다음과 같은 단계가 존재한다.
  1. 테스트를 작성하고,
  2. 우선 컴파일'만' 되게 하고,
  3. 컴파일이 되었다면 실패하는지 확인하기 위해 다시 실행하고,
  4. 실패하는 테스트를 성공하게'만' 수정한 후,
  5. 리팩토링을 통해 중복을 거친다.
* 각 단계는 짧게는 수 초에 그칠 수 있지만, 반드시 거쳐야만 하는 단계로 이해할 수 있다.
* 이 때, **각 단계는 서로 다른 목적을 갖기에 다른 스타일의 해법을 필요**로 한다.
* 특히 **첫 네 단계는 빠르게 진행하는 것이 우선되어야 하며, 이를 위해서는 어떠한 끔찍한 죄악도 허용**된다.
  * 이 과정에서는 설계보다 속도가 더 높은 가치를 갖는다고 이해해도 무방하다.

### TDD 주기의 완성
* 상술한 이유는 모든 설계를 무시해도 된다는 면죄부는 될 수 없다.
* **주기의 마지막 단계 없이는 주기가 완전하지 않으며, 앞의 네 단계 역시 제대로 구성될 수 없다**.
* **중요한 것은 적시에 적절한 설계를 도입하고, 돌아가게 만드는 동시에 올바르게 만드는 것**이다.

### TDD 주기를 통해 새로운 기능을 도입하기
```
> 적절한 시기에 중복을 제거하고 올바른 설계를 도입하여 TDD 주기를 완성하기 전에는 다른 테스트를 작성하지 않는 것이 바람직하다.
```
* 예를 들어, 이미 존재하는 값 객체의 용도와 다른 문맥에서 완전히 동일하게 동작하는 값 객체를 도입해야한다고 가정하자.
  * 이는 **곧바로 공략하기에는 너무 큰 테스트이므로, 우선 전진을 위한 작은 테스트로 분할**한다.
* 새로운 테스트를 작성하는 과정에서, **첫 네 단계의 가치는 속도에 있으므로 기존 값 객체를 그대로 복사하여 컴파일과 테스트를 통과**시킨다.
* 여기까지만 봐서는 모든 설계를 무시하고, 추상화를 무시하고, 장기적으로는 유지보수성을 무시하는 행동처럼 보일 수 있다.
* 그러나 **TDD 주기의 완성은 중복을 제거하는 것으로 성취되므로, 다른 테스트를 작성하기 위해 마지막 단계를 건너뛰는 일 없이 올바른 설계를 도입**해야 한다.
* 중복을 제거하여 올바른 설계를 도입한 후에는 미리 작성해둔 TODO 리스트에서 할 일을 찾고, 또 다른 테스트를 작성해도 좋다.