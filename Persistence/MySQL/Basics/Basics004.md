# Basics
## 2022-09-14 Wed

### MySQL 서버의 구조
* **MySQL 서버는 사람으로 따지면 머리 역할을 담당하는 MySQL 엔진과 손 발 역할을 수행하는 스토리지 엔진으로 구분**할 수 있다.
  * 이 때, 스토리지 엔진은 핸들러 API를 만족하기만 한다면 누구나 직접 구현하여 MySQL 서버에 추가할 수 있다.
  * 또한 **MySQL 엔진과 스토리지 엔진을 합쳐 MySQL 또는 MySQL 서버라는 용어로 지칭**한다.
* MySQL은 일반적인 상용 RDBMS와 같이 대부분의 프로그래밍 언어로부터의 접근 방법 역시 모두 지원한다.
  * 이로 인해 C는 물론 JDBC, 파이썬 등 많은 언어를 통해 MySQL 서버에서 쿼리를 사용할 수 있다.
* MySQL 서버는 MySQL 엔진에 더해 스토리지 엔진으로서 기본적으로 InnoDB와 MyISAM을 제공한다.

### MySQL 엔진의 특징
```
> MySQL 엔진은 요청된 SQL 문장을 분석하거나 최적화하는 등 DBMS의 두뇌에 해당하는 처리를 수행한다.
```
* MySQL 엔진은 클라이언트로부터 발생하는 접속 및 쿼리 요청을 처리하는 커넥션 핸들러에 더해 다음과 같은 분류를 갖는다.
  1. SQL 파서 및 전처리기
  2. 쿼리의 최적화된 실행을 위한 SQL 옵티마이저
  3. SQL 인터페이스
  4. 캐시와 버퍼
* 또한, **MySQL은 표준 SQL인 ANSI SQL 문법을 지원하므로 표준 문법에 따라 작성된 쿼리는 다른 DBMS와 호환되어 실행**될 수 있다.

### 스토리지 엔진의 특징
```
> 스토리지 엔진은 실제 데이터를 디스크에 저장하거나, 디스크로부터 데이터를 읽어오는 역할을 담당한다.
> MySQL 서버에서 MySQL 엔진의 종류는 단 하나지만, 스토리지 엔진은 여러 종류를 동시에 사용할 수 있다.
```
* **테이블 생성시 사용할 스토리지 엔진을 명시하는 경우, 이후에 해당 테이블로부터 발생하는 모든 읽기 또는 변경 작업은 정의된 스토리지 엔진에 의해 처리**된다.
  * 예를 들어, `CREATE TABLE table_name (id INT) ENGINE=InnoDB`와 같은 형태로 명시한다.
  * 상술한 쿼리에서, 이후의 모든 INSERT / UPDATE / DELETE /SELECT 등의 작업은 InnoDB 스토리지 엔진에 의해 처리된다.
* 이 때, **각각의 스토리지 엔진은 성능 향상을 위해 키 캐시 또는 버퍼 풀과 같은 기능을 내장**한다.
  1. 키 캐시: MyISAM 스토리지 엔진에서 성능 향상을 위해 사용하는 기능이다.
  2. **버퍼 풀: InnoDB 스토리지 엔진에서 성능 향상을 위해 사용하는 기능**이다.

### Handler API
* MySQL 엔진의 쿼리 실행기에서 실제 데이터를 읽거나 쓰는 경우 각각의 스토리지 엔진에 쓰기 또는 읽기 작업을 요청해야 한다.
  * 이 때, **이러한 요청을 핸들러 요청이라고 하며 각 경우에 사용되는 API를 핸들러 API**라고 한다.
  * InnoDB 스토리지 엔진 역시 이러한 핸들러 API를 활용하여 MySQL 엔진과 데이터를 주고받는다.
* 핸들러 API를 활용하여 얼마나 많은 레코드 작업이 있었는지 확인하고자 하는 경우, 다음과 같은 명령어를 활용할 수 있다.
```
SHOW GLOBAL STATUS LIKE 'Handler%';
```