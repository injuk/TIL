# Basics
## 2022-09-01 Thu

### 느린 디스크 IO
* CPU나 메모리처럼 전기적인 장치의 성능은 매우 빠른 속도로 발전해왔으나, 디스크와 같은 기계식 장치는 상당히 제한적으로 발전해왔다.
  * **최근에는 자기 디스크를 사용하는 HDD가 아닌 SSD가 많이 활용되고 있으나, 여전히 데이터 저장 매체는 컴퓨터에서 가장 느린 부분을 차지**한다.
* 이러한 이유에서, **데이터베이스의 성능 튜닝은 어떻게 디스크 IO를 줄이느냐에 달려 있는 경우가 많다**.

### SSD와 HDD의 비교
* 상술했듯, **CPU나 메모리와 같은 전자식 장치와 비교하여 HDD는 기계식 장치이므로 언제나 데이터베이스 서버의 병목**이 된다.
* 때문에 기존의 기계식 장치인 HDD를 대체하기 위한 전자식 저장 매체인 SSD가 각광받게 되었으며, 빠르게 HDD의 자리를 대체하고 있다.
  * SSD는 전자식 매체이므로 기계식으로 원판을 회전시킬 필요가 없기에 HDD와 비교하여 훨씬 빠른 IO가 가능하다.
* 반면, 디스크의 헤더를 거의 움직이지 않고 한 번에 많은 데이터를 읽어들이는 순차 IO에서는 SSD와 HDD의 성능이 유사하다.
  * 그러나 **SSD는 HDD와 비교하여 랜덤 IO가 훨씬 빠르다는 장점이 존재**한다.
  * **데이터베이스 서버에서는 순차 IO보다는 작은 데이터를 읽고 쓰는 랜덤 IO 작업의 비중이 훨씬 크기에 SSD의 장점은 DBMS용 스토리지에 최적화**되어 있다.

### 랜덤 IO와 순차 IO
* 디스크의 성능은 디스크 헤더의 위치 이동 없이 얼마나 많은 데이터를 한 번에 기록하느냐에 의해 결정된다.
  * 때문에 **여러번 읽기 또는 쓰기 작업을 요청하는 랜덤 IO 작업의 부하가 훨씬 더 크다**.
  * 이는 디스크 원판을 가지지 않는 SSD에서도 마찬가지이며, 때문에 MySQL에는 그룹 커밋 또는 로그 버퍼 등의 기능이 내장되어 있다.
* 사실 **쿼리를 튜닝하여 랜덤 IO를 순차 IO로 변경하는 방법은 그렇게 많지 않다**.
  * **일반적으로 `쿼리 튜닝은 랜덤 IO 자체를 줄이는 데에 그 목적`이 있다**.
  * 이는 즉, **쿼리를 처리하기 위해 꼭 필요한 데이터만 읽도록 쿼리를 개선하는 것을 의미**한다.
* 일반적으로 **인덱스 레인지 스캔은 데이터를 읽기 위해 주로 랜덤 IO를 사용**한다.
  * 반면, **풀 테이블 스캔은 순차 IO를 사용**하므로 커다란 테이블의 레코드를 대부분 읽는 경우 풀 테이블 스캔을 유도하는 경우도 있다.
  * 이러한 유형의 상호작용은 OLTP 유형의 웹 서비스보다는 데이터 웨어하우스, 또는 통계 작업에서 활용된다.