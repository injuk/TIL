# CleanCode
## 2022-02-02 Wed

## 창발성
* 창발성이란 하위 체계로부터 생겨나지만, 하위 체계로 환원되지는 않는 속성을 말한다.
* 단순한 설계를 위한 다음의 네 가지 규칙은 우수한 설계의 창발성을 촉진하며, 소프트웨어 설계 품질을 크게 높여준다.
  * 다음의 규칙을 따르면 설계는 단순하다고 말할 수 있다.
  
### 규칙 1. 모든 테스트를 실행하기
* 설계는 의도한 대로 돌아가는 시스템을 만들어야 한다.
  * 그러나 시스템을 검증할 방법이 없다면, 그 가치를 인정받을 수 없다!
* 테스트가 가능한 시스템을 만들기 위해 노력한다면 설계 품질은 덩달아 높아진다.
  * 크기가 작고 목적 하나만 수행하는, SRP를 준수하는 클래스가 만들어진다.
  * 결합도가 높은 클래스는 테스트가 어려우므로 개발자는 DIP, 의존성 주입, 인터페이스, 추상화 등의 도구를 활용하여 결합도를 낮추려고 한다.
    * 따라서 설계 품질은 높아질 수 밖에 없다!
* **테스트 케이스를 만들고 계속해서 테스트하라는 단순한 원칙을 따르면 시스템은 저절로 낮은 결합도와 높은 응집력을 갖게 된다**.
  * 즉, 객체 지향이 원하는 목표가 저절로 달성되는 것이며, 테스트 케이스 작성이 높은 설계 품질로 이어지게 된다!

### 규칙 2, 3, 4. 리팩토링하기
* 테스트 케이스의 작성을 마친 후에 코드와 클래스를 정리하기 시작해야 한다.
* 코드는 다음과 같은 방식으로 점진적으로 리팩토링한다.
  1. 코드를 몇 줄 작성한다.
  2. 잠시 멈추고 품질을 확인한다.
  3. 새로 추가된 코드가 전체의 품질을 낮춘다면, 깔끔하게 정리한다.
  4. 정리한 후에 테스트 케이스를 돌린다.
  * **테스트 케이스가 있기에 더 이상 시스템이 꺠지는 것을 두려워할 필요가 없다**!
* **리팩토링 중에는 설계 품질을 높이는 기법은 무엇이든 적용**해도 좋다.
  * 응집도를 높이거나, 결합도를 낮추거나, 관심사를 분리하거나, 함수와 클래스의 크기를 줄이고 더 좋은 명명법을 찾는다.
* 해당 단계는 단순한 설계 규칙 중 나머지 셋을 적용하는 단계이다.

### 규칙 2. 중복 제거
* 중복은 추가 작업, 잠재적인 위험, 복잡도를 뜻하므로, 설계에서 마주치는 커다란 적이다.
* **깔끔한 시스템을 만들기 위해서는 단 몇 줄의 중복도 제거하려는 의지가 필수적**이다.
* 공통적인 메소드를 새로운 메소드로 추출하였을 때 클래스가 SRP를 위반한다면, 새로운 클래스로 메소드를 옮기는 것을 고려한다.
  * 메소드를 더 추상화하여 새로운 맥락에서 재사용할 수 있게 한다면 더 좋다.
  * 이러한 소규모 재사용은 시스템의 복잡도를 크게 줄여주며, 소규모 재사용을 익혀야만 대규모의 재사용이 가능하다.
* 고차원의 중복을 제거하기 위해 템플릿 메소드 패턴을 활용해볼 수 있다.
  * [TemplateMethod](https://github.com/injuk/TIL/blob/master/Code/DesignPattern/DesignPattern001.md)

### 규칙 3. 표현하기
* 코드를 작성하는 동안에는 코드를 구석구석 이해하며, 자신이 쉽게 이해하는 코드를 짜기 쉽다.
  * **그러나 나중에 코드를 유지보수할 개발자가 코드를 짠 개발자만큼 문제를 이해할 가능성은 적다**.
* 프로젝트 비용 중 대다수는 장기적인 유지보수 비용이다.
  * 하지만 시스템이 커질수록 유지보수 개발자가 시스템을 이해하는데에 드는 시간과, 코드를 오해할 가능성은 점점 커져만 간다.
* 때문에 **코드는 다른 사람이 쉽게 이해할 수 있도록 개발자의 의도를 명확히 표현해야만 한다**.
* 개발자의 의도를 명백하게 표현하는 코드를 작성하려면,
  1. 좋은 이름으로 명명한다.
  2. 함수와 클래스의 크기를 줄인다.
     * 이러한 **작은 함수와 클래스는 명명과 구현, 이해가 모두 쉽다**. 
  3. 표준적인 이름을 사용한다.
     * 예를 들어 클래스가 표준적인 디자인 패턴을 사용했다면, 클래스 이름에 패턴 이름을 넣어준다.
     * 이를 통해 유지보수 개발자가 코드의 설계 의도를 이해하기 쉬워질 수 있다.
  4. 단위 테스트 케이스를 꼼꼼하게 작성해둔다.
     * **테스트 케이스는 사실상 예제에 해당**한다.
     * **잘 만든 테스트 케이스는 클래스의 기능을 명확하게** 드러낸다.
* 하지만 표현력을 가장 크게 높이는 방법은 노력이다.
  * 코드를 작성하고 바로 다음 작업으로 넘어가기보다는 다음 사람이 읽기 쉽도록 고민하는 습관을 들여야 한다.
  * 개발자는 자신의 작품을 누구에게나 자랑할 수 있도록 함수와 클래스에 조금 더 시간을 투자해야 한다.
* **주의는 엄청난 재능이다!**

### 규칙 4. 클래스와 메소드의 수를 최소화하기
* **극단적인 중복 제거와 의도의 표현은 오히려 득보다 실**이 된다.
  * 예를 들어, 작은 클래스와 메소드를 위해 수많은 클래스와 메소드를 찍어낼 수도 있다.
* 해당 규칙은 **함수와 클래스 수를 가능한 한 줄이는 것을 제안**한다.
* **목표는 함수와 클래스의 크기를 작게 유지하는 동시에 시스템의 크기도 작게 유지하는 데에 있음을 명심**하자.
* **해당 규칙은 앞선 세 규칙에 비해 우선 순위가 가장 낮다**.
  * 즉, 클래스와 함수의 수를 줄이는 작업보다 테스트 케이스의 작성과 중복 제거, 명시적인 표현 작업이 더 중요하고, 우선되어야 한다.

### 결론
* 물론 수많은 개발 경험을 대신할 단순한 개발 기법은 없다.
* 그러나 상술한 네 가지의 **단순한 설계 규칙을 따른다면 오랜 경험을 통해서나 익힐 수 있는 우수한 기법과 원칙을 단숨에 활용**할 수 있다.