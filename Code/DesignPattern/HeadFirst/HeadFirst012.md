# HeadFirst
## 2022-11-29 Tue

### 여러 패턴을 혼합하기
```
> 복합 패턴이란, 여러 패턴을 함께 사용하여 여러 디자인 문제를 해결하는 방법을 의미한다.
```
* 복합 패턴은 여러 패턴이 함께 동작하는 것에 지나지 않지만, 패턴을 결합하기만 해서는 복합 패턴으로 볼 수 없다.
  * 대신, **복합 패턴은 여러 문제의 일반적인 해결법을 제시하기 위해 둘 이상의 패턴을 결합해 사용하는 경우를 의미**한다.
  * 또한, **MVC 패턴은 다양한 디자인 문제를 해결할 수 있으므로 복합 패턴의 대표적인 예시**가 된다.
* **패턴은 반드시 상황에 맞게 사용해야 하며, 임의의 패턴을 사용하겠다는 목적을 두고 억지로 패턴을 적용하는 것은 지양하는 것이 바람직**하다.

### MVC 패턴
```
> MVC 패턴은 매우 강력한 복합 패턴이므로, 이를 이해하기 위한 핵심은 디자인 패턴이다.
```
* MVC 패턴은 크게 다음과 같은 역할을 하는 모델과 뷰, 컨트롤러로 분류된다.
  1. 모델: 모든 데이터, 상태와 애플리케이션 로직을 포함한다.
  2. 뷰: 모델을 표현하는 방법을 제공하며, 일반적으로 화면에 표시할 데이터와 상태를 모델로부터 직접 가져온다.
  3. 컨트롤러: 사용자로부터 입력을 받은 경우, 해당 내용이 모델에게 어떠한 의미가 있는지 파악한다.
* 특히, **뷰와 컨트롤러가 모델의 상태를 조작하거나 조회하기 위한 인터페이스를 제공하는 반면 모델은 기본적으로 뷰와 컨트롤러의 존재를 모르는 경우가 많다**.

### 모델, 뷰, 컨트롤러
* 사용자는 일반적으로 뷰와 상호작용하며, 뷰는 모델을 표현하는 창의 역할을 수행한다.
  * **사용자가 뷰와 상호작용하는 경우, 뷰는 무슨 일이 발생했는지 컨트롤러에게 이를 알려 작업을 처리하도록 유도**한다.
* **컨트롤러는 사용자의 요청을 받아 해석한 후, 해석 결과를 토대로 모델의 적절한 상태 변경을 요청**한다 
  * 반면, **사용자의 요청을 해석한 결과에 따라서는 컨트롤러는 뷰를 변경할 수도 있다**.
* 일반적으로 상태가 변경된 경우, 모델은 뷰에게 이를 알린다.
  * 또는 뷰가 모델에게 상태를 요청하여 인터페이스를 직접 갱신할 수도 있다.
  * 예를 들어, 모델이 상태 변경을 뷰에 알린 경우 뷰는 인터페이스를 갱신하기 위해 필요한 정보를 모델에게 요청할 수도 있다.
* 특히, **컨트롤러의 경우 일견 단순한 데이터 전달만을 수행하는 것처럼 보이지만 실제로는 다음과 같은 중요한 역할을 수행**한다.
  1. **뷰가 데이터 전달과 인터페이스 관리와 같은 두 가지 역할을 맡아 필요 이상으로 복잡해지지 않도록 한다**.
  2. 뷰와 모델 사이에 위치하여 두 요소 간의 결합을 의도적으로 끊어주며, 이를 통해 제어 로직을 뷰로부터 분리한다.
* 이렇듯 **컨트롤러는 뷰와 느슨하게 결합되어 더 유연하고 확장성이 좋은 디자인을 유발하는 중요한 역할**을 맡는다.

## 2022-11-30 Wed
### 복합 패턴으로서의 MVC 패턴
```
> MVC를 여러 패턴이 함께 적용된 하나의 디자인으로 바라보는 관점은 MVC를 이해하기에는 가장 적합한 방법이기도 하다.
```
* MVC 패턴을 구성하는 모델과 뷰, 컨트롤러는 각각 다음과 같은 패턴과 연관된다.
  1. 전략 패턴: 뷰와 컨트롤러는 고전적인 전략 패턴으로 구현되며, 컨트롤러가 전략을 제공하므로 뷰 객체는 여러 전략을 통해 설정될 수 있다.
  2. 컴포지트 패턴: 디스플레이는 여러 요소로 구성되는 복합 객체이며, 각각의 디스플레이 구성 요소는 또 다른 복합 객체 또는 리프 노드가 될 수 있다.
  3. 옵저버 패턴: 모델은 옵저버 패턴을 통해 상태가 변경되었을 때 연관된 객체들에게 연락할 수 있다.
* 이 때, 뷰는 외관에만 신경쓰되 인터페이스의 행동을 결정하는 것은 모두 컨트롤러에게 일임된다.
  * 이를 위해 **전략 패턴을 도입하면 뷰를 모델로부터 분리하여 결합도를 낮추는 데에도 큰 도움이 될 수 있다**. 
* 또한, 옵저버 패턴을 통해 모델을 뷰와 컨트롤러로부터 완전히 독립시키는 것으로 하나의 모델에서 서로 다른 뷰를 사용하거나 여러 뷰를 동시에 사용할 수 있다.

### MVC 패턴과 옵저버 패턴, 전략 패턴 및 컴포지트 패턴
* **모델의 상태 변화에 관심이 있는 객체라면 무엇이든지 모델에 옵저버로 등록할 수 있으며, 모델의 상탤가 변경될 때마다 모든 옵저버는 연락을 전달**받는다.
  * 이로 인해 모델은 뷰 또는 컨트롤러에게 전혀 의존하지 않을 수 있다.
* **뷰는 사용자의 행동을 처리하는 작업을 컨트롤러에게 온전히 위임하며, 자신은 화면 표시에만 신경쓸 수 있다**.
  * 이 때, **컨트롤러는 뷰의 전략 객체로서 사용자의 행동에 따른 대응을 책임지므로 컨트롤러를 변경하면 뷰의 행동도 변경할 수 있다**.
  * 때문에 사용자의 입력에 따라 모델에게 요청하는 작업 역시도 컨트롤러의 책임이 된다.
* **뷰는 버튼이나 텍스트 등 여러 GUI 항목으로 구성된 복합 객체이며, 최상위 구성 요소는 여러 다른 하위 요소를 포함**할 수 있다.
  * 이 과정에서 뷰는 기본적으로 컴포지트 패턴을 따르므로, 최하위 구성 요소는 리프 노드가 된다.

### 모델의 역할
* 모델은 데이터와 상태, 애플리케이션 로직을 모두 관리할 수 있어야 한다.
  * 때문에 **비즈니스 로직은 물론, 컨트롤러가 입력을 전달하거나 뷰와 컨트롤러가 모델의 상태를 알아낼 수 있도록 외부에 공개되는 인터페이스도 필수적**이다.
  * 또한, 모델은 옵저버 패턴을 사용하여 구현되므로 옵저버를 등록하고 변경된 상태에 대해 알릴 수 있는 메소드 역시 필요하다.
* 이 과정에서 **모델은 뷰에 대해 어떠한 가정도 세우지 않으며, 그저 자신의 상태를 관리하고 상태가 변화할 때 등록된 모든 옵저버에게 알리는 것에 집중**한다.
* 반면 **애플리케이션을 고도화하는 과정에서 새로운 모델을 도입할 필요가 있는 경우, 기존 인터페이스와의 호환성을 위해 어댑터 패턴의 적용을 고려**할 수 있다. 
  * 이렇듯 MVC 패턴을 사용하는 과정에서는 새로운 모델을 기존 뷰 또는 컨트롤러에 적응시키기 위해 어댑터 패턴을 사용하는 상황이 쉽게 발생할 수 있다.

### 뷰의 역할
* **뷰는 컨트롤러에게 어떠한 요청이 전달되었는지를 알리며, 이를 통해 간접적으로 모델이 제어될 수 있도록 하는 역할을 수행**한다.
  * 즉, **뷰는 모델에게 어떠한 작업을 직접 요청하지 않는 대신 컨트롤러에게 이러한 요청의 해석과 모델 호출을 위임**한다.

### 컨트롤러의 역할
* **컨트롤러는 뷰에서 사용되는 전략으로서 기능하며, 사용자의 요청을 해석하여 모델에게 요청을 작업을 자신만의 방식으로 결정**한다.
  * 나아가 상술한 모델과 뷰 각각의 역할을 준수하는 객체가 모두 모였을 때, 비로소 이들을 조합하여 일종의 디자인인 MVC 패턴을 구성할 수 있다.

## 2022-12-01 Thu
### MVC 패턴과 주의사항
* **컨트롤러에서 애플리케이션 로직을 구현하는 경우는 사실상 없다고 봐도 무방**하다.
  * 컨트롤러는 사용자가 뷰를 대상으로 취하는 행동을 모델로의 요청으로 변경하며, 모델은 이러한 요청을 받아 필요한 작업을 처리하는 애플리케이션 로직을 구현한다.
  * 이 때, **애플리케이션 로직이란 데이터를 관리하고 조작하는 코드 전반을 의미하며 이는 모델에 작성**되어야 한다.
* 컨트롤러는 뷰와 모델 사이에서 위치하여 결합도를 낮추므로, 일종의 중재자로 볼 수도 있다.
  * 중재자 패턴의 중재자는 객체 사이의 상호작용을 캡슐화하여 두 객체가 느슨하게 연결되도록 한다.
  * 그러나, **컨트롤러가 올바른 중재자가 되기 위해서는 뷰 역시도 모델을 직접 호출하지 않도록 구현되어야 한다**.
* 모델이 상태 변화를 뷰에 알린 경우, 뷰에서 상태를 모델에 요청하는 대신 모델이 푸시해주도록 구현할 수도 있다.
  * 그러나 이러한 푸시 방식은 뷰가 정말 필요할 때 데이터를 전달 받을 수 없다는 단점이 존재한다.
* **하나의 뷰에는 하나의 컨트롤러를 연결하는 것이 일반적이지만, 경우에 따라서는 하나의 컨트롤러가 여러 뷰를 관리할 수도 있다**.

### MVC와 웹 프레임워크
```
> MVC 패턴은 매우 유용하므로, 실제로도 수많은 웹 프레임워크에도 적용되어 있다.
```
* **일반적인 웹 애플리케이션은 클라이언트와 서버 측 애플리케이션을 각각 나누며, 상황에 따라 모델과 뷰 및 컨트롤러의 위치에 따라 설계 역시 달라진다**.
  * 신 클라이언트의 경우, 대부분의 모델과 뷰 및 컨트롤러가 모두 서버에 포함되며 브라우저는 뷰를 렌더링하고 컨트롤러로 입력을 받아오는 역할을 맡는다.
  * 반면 SPA의 경우, 모델과 뷰 및 컨트롤러까지 클라이언트에 포함된다.
  * 상술한 두 방식은 MVC 구현체의 양 극단에 있으며, 모델과 뷰 및 컨트롤러가 클라이언트와 서버 중 어디에 위치하느냐에 따라 다양한 방식으로 구현될 수 있다.
* 세상에는 이미 수많은 웹 MVC 프레임워크가 존재하며, 각각의 프레임워크는 고유한 방식으로 MVC를 클라이언트와 서버에 나누어 배치한다.

### 복합 패턴의 결론
```
> 복합 패턴은 둘 이상의 패턴을 결합하여 일반적으로 자주 등장하는 문제들의 해법을 제공한다.
```
* 복합 패턴의 일종인 MVC 패턴은 옵저버와 전략 패턴, 그리고 컴포지트 패턴으로 구성된다.
  1. 모델은 옵저버 패턴을 사용하여 의존성을 없애면서도 옵저버들에게 자신의 상태가 변경되었음을 알릴 수 있다.
  2. **컨트롤러는 뷰의 전략 객체이며, 뷰는 단지 컨트롤러를 변경하는 것으로 또 다른 역할을 수행**할 수 있다.
  3. 뷰는 컴포지트 패턴을 사용하는 여러 구성 요소를 통해 사용자 인터페이스를 구현한다.
* **모델과 뷰 및 컨트롤러는 상술한 세 가지 패턴으로 서로 느슨하게 결합되면서도 유연한 구현을 가능케한다**.
* MVC 패턴은 웹 애플리케이션에서도 적용이 가능하며, 실제로도 클라이언트 - 서버 구조에 MVC 패턴을 적응시키는 다양한 웹 MVC 프레임워크가 존재한다.