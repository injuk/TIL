# Objects
## 2022-04-10 Sun

## 타입 계층의 구현
* 일반적으로 퍼져있는 흔한 오해는 타입과 클래스가 동일한 개념이라는 것이다.
* 이는 사실이 아니며, **타입은 개념의 분류를 의미하는 반면 클래스는 타입을 구현하는 방법 중 하나에 불과**하다.
  * 타입 계층은 다양한 방식으로 구현된 타입들을 하나의 타입 계층으로 조합할 수 있으므로 더 복잡하다.
* **타입 계층은 동일한 메시지에 대한 행동 호환성을 전제로 하므로, 타입 계층을 구현하는 것은 곧 다형성을 구현하는 것**과 같다.
* **타입과 타입 계층을 구현한다고 해서 서브타이핑 관계가 보장되는 것은 아니다**.
  * 서브타이핑 관계는 서브타입이 슈퍼타입을 대체할 수 있도록 리스코프 치환 원칙을 준수해야 한다.

### 클래스를 이용하는 타입 계층의 구현
* **타입은 객체의 퍼블릭 인터페이스를 가리키므로 클래스는 객체의 타입과 구현을 동시에 정의하는 셈**이다.
  * 이러한 이유로 객체지향 언어에서는 클래스를 사용자 정의 타입이라는 명칭으로도 부르곤 한다.
* **타입을 구현할 수 있는 방법이 단 한 가지만 존재하는 경우에 한해 타입과 클래스는 동일하게 취급할 수 있다**.
* 반면, **타입을 구현할 수 있는 방법이 다양해지는 시점부터는 클래스와 타입이 갈라지기 시작**한다.
* 상속을 이용하여 자식 클래스가 부모 클래스의 구현 뿐만 아니라 퍼블릭 인터페이스도 상속할 수 있으므로, 타입 계층을 쉽게 구현할 수 있다.
  * 그러나 상속은 자식 클래스가 부모 클래스에게 강하게 결합되도록 하므로, 구체 클래스를 상속받는 것은 지양해야 한다.
  * 가능하다면 추상 클래스를 상속하거나 인터페이스를 구현하도록 한다.

### 인터페이스를 이용하는 타입 계층의 구현
* **상속으로 인한 결합도 문제를 피하고, 다중 상속이라는 제약도 해결할 수 있는 방법은 클래스가 아닌 인터페이스를 활용하는 것**이다.
  * 인터페이스와 클래스를 조합하여 사용하는 것으로 다중 상속의 딜레마에 빠지지 않을 수 있고, 단일 상속 계층으로 인한 결합도 문제도 회피할 수 있다.
* **인터페이스가 다른 인터페이스를 확장하도록 만드는 것으로 슈퍼타입과 서브타입 간의 타입 계층을 구성**할 수 있다.
* 인터페이스와 클래스를 조합하여 사용하는 것으로 다음과 같은 효과를 얻을 수 있다.
  1. 여러 클래스가 동일한 타입을 구현할 수 있다: **서로 다른 클래스를 이용해서 구현하더라도 동일한 타입으로 취급**할 수 있다.
  2. 하나의 클래스가 여러 타입을 구현할 수 있다.
* **중요한 것은 인터페이스를 통해 타입을 정의하고 클래스로 객체를 구현하는 것으로, 클래스 상속 없이 타입 계층을 구현할 수 있다는 점**이다.

### 클래스와 타입의 차이
* 클래스와 타입의 차이점을 이해하는 것은 설계 관점에서 매우 중요하다.
  1. 타입: **동일한 퍼블릭 인터페이스를 갖는 객체들의 범주**이다.
  2. 클래스: **타입에 속하는 객체들을 구현하기 위한 구현 메커니즘**
* **객체지향에서 중요한 것은 협력 안에서 객체가 제공하는 행동이므로, 타입은 클래스보다 중요한 개념**이다.
  * 타입이 식별된 후에서야 타입에 속하는 객체를 구현하기 위해 클래스를 사용하게 된다.
```
> 중요한 것은 객체가 외부에 제공하는 행동인 타입을 중심으로 객체들의 계층을 설계하는 것이므로, 언제나 클래스가 아니라 타입에 집중해야 한다.
```

### 추상 클래스를 이용하는 타입 계층의 구현
* 추상 클래스는 상속을 이용하여 구현을 공유하면서도 결합도로 인한 부작용을 회피하기 위해 제공되는 방법이다.
* 구체 클래스로 타입을 정의하여 상속하는 것과 추상 클래스로 타입을 정의하여 상속받는 방법은 다음과 같은 주요한 차이점이 존재한다.
  1. 추상화의 정도: 의존하는 대상의 추상화 정도가 다르다.
  2. 상속을 사용하는 의도: 구체 클래스는 상속을 염두에 두고 설계되지 않았을 가능성이 높으므로, 확장으로 인한 변경에 취약할 수 있다.
     * 반면 추상 클래스는 애초에 상속을 염두에 두고 설계된 클래스이므로, 추상 메소드를 제공하여 상속 계층을 쉽게 확장하고 결합도로 인한 부작용을 방지한다. 
* 의존 대상이 추상적일수록 결합도와 변경으로 인한 영향도는 줄기에, 모든 구체 클래스의 부모 클래스를 항상 추상 클래스로 만들기 위해 노력하는 것이 바람직하다.