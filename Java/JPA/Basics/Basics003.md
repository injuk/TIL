# Basics
## 2022-07-14 Thu

### 엔티티 매핑
* 엔티티의 매핑은 JPA에서 가장 중요한 두 가지 중 하나이다.
  * 예를 들어, 또 다른 중요한 개념인 영속성 컨텍스트는 JPA 내부적인 동작 원리를 강조한다.
  * 반면 **엔티티 매핑은 설계적인 측면을 강조하며, 객체와 관계형 데이터베이스를 어떻게 매핑하여 사용할지와 같은 정적인 측면을 의미**한다.
* 엔티티 매핑은 주로 어노테이션을 명시하여 진행하며, 다음과 같은 매핑을 사용할 수 있다.
  1. 객체와 테이블 간의 매핑: @Entity, @Table
  2. 필드와 컬럼 간의 매핑: @Column
  3. 기본 키 매핑: @Id
  4. 연관관계의 매핑: @ManyToOne, @JoinColumn

### @Entity
* 해덩 어노테이션이 명시된 클래스는 JPA가 관리하는 엔티티가 된다.
  * 따라서 **JPA를 통해 관리할 테이블과 매핑하는 클래스는 반드시 @Entity 어노테이션을 명시**해야 한다.
* **엔티티 클래스는 JPA가 관리하기 위해 반드시 public 또는 protected 접근 제어자로 정의된 기본 생성자를 가져야 한다**.
  * 또한, 엔티티 클래스는 final이거나 enum, interface, inner 클래스일 수 없다.
  * **엔티티 클래스를 통해 저장할 필드에는 final 키워드도 사용하지 않아야 한다**.
* 상술한 이유에서, @Entity 어노테이션이 명시된 클래스를 보면 다음과 같은 내용을 유추할 수 있다.
  1. 해당 클래스는 JPA에 의해 관리될 것이다.
  2. **해당 클래스는 실제 데이터베이스의 JPA가 관리하는 테이블과 매핑될 것**이다.
* 해당 어노테이션에는 `name` 속성을 명시하여 JPA에서 관리할 엔티티의 이름을 지정할 수 있으며, 기본적으로는 클래스의 이름을 그대로 사용한다.
  * **해당 속성은 JPA가 내부적으로 구분하는 이름을 의미하지만, 굳이 name 속성을 통해 모든 엔티티 객체의 이름을 정의할 필요는 없다**.
  * 즉, 다른 패키지에 동일한 클래스 이름이 존재하는 경우가 아니라면 기본 값을 사용하는 것이 바람직하다.

### @Table
* 해당 어노테이션은 엔티티 객체의 이름과 다른 이름을 갖는 테이블과 매핑하고 싶은 경우에 사용한다.
* 예를 들어, 회사의 규정상 엔티티의 이름과 동일한 테이블이 아닌 축약어를 사용해야하는 경우에 `@Table(name = "테이블명")` 형태로 명시할 수 있다.
  * 이 경우, 해당 엔티티와 관련된 모든 쿼리는 @Table 어노테이션의 `name` 속성에 명시된 값의 테이블을 대상으로 요청된다.