# Basics
## 2022-07-10 Sun

### JPA 도입의 이점
* JPA 이전에는 복잡한 JDBC 연결 설정과 쿼리를 모두 개발자가 하나하나 작성해야 했다.
* 이후에 JDBC template 또는 MyBatis 등의 SQL mapper가 등장하여 JDBC 관련 코드를 많이 줄여주었으나, 여전히 쿼리 작성은 개발자의 책임으로 남는다.
* **JPA는 이러한 배경에서 탄생하였으며, 이를 적절히 활용할 경우에는 JDBC 관련 코드는 물론 복잡한 쿼리를 작성할 필요도 없어지게 된다**.
  * JPA를 활용하면 마치 컬렉션 API를 사용하듯이 데이터베이스와 상호작용할 수 있게 된다.
  * 이를 통해 **JPA는 개발자 대신 적절한 쿼리를 생성하여 데이터를 조회하거나 영속화하는 작업을 수행**한다.
* 모든 데이터베이스 쿼리를 하나하나 손수 작성하는 것은 현재의 Java개발 환경 상에서는 생산성이 상대적으로 뒤떨어질 수 밖에 없다.
  * 반면, JPA를 사용할 경우 생산성은 물론 유지보수 측면에서도 큰 이점을 누릴 수 있다.

### JPA 도입의 어려움
* JPA를 도입하지 않아 데이터베이스의 연결 또는 SQL 쿼리들이 명시적으로 작성된 코드는 장황하지만, 반대로 말하면 그만큼 명시적이다.
* 반면, **JPA를 통해 많은 부분을 자동화한 경우에는 코드가 간결해지지만, 그만큼 많은 동작이 암시적으로 가려지게 되어 이해하기 어려울 수 있다**.
  * 심지어, 실무에서는 데이터베이스 테이블이 매우 많고 복잡하게 얽혀있어 JPA의 도입을 더 어렵게 한다.
* 또한 **JPA를 잘 활용하기 위해서는 객체와 테이블을 적절히 매핑하는 것이 무엇보다도 중요하지만, 이는 놓치기도 쉬울 뿐더러 어렵기도 한 작업**이다.

### JPA는 왜 사용해야하는가?
* 일반적으로 현대적인 애플리케이션을 작성하는 경우, Java와 같은 객체지향 언어와 관계형 데이터베이스를 사용하게 된다.
  * NoSQL이 부상하고 있으나, 여전히 영속성 계층을 주도하는 것은 Oracle 또는 MySQL과 같은 관계형 데이터베이스이다.
* 이는 다시 말해 **현대적인 애플리케이션은 객체를 관계형 데이터베이스에 저장하여 관리하는 식으로 동작한다는 결론**에 이르게 된다.
* 그러나 객체지향적인 프로그래밍을 진행해나간다고 한들, 관계형 데이터베이스가 이해할 수 있는 것은 SQL 뿐이므로 결국에는 SQL을 작성해야만하는 순간이 온다.
  * 즉, 싫어도 SQL 중심적인 개발을 해야만 한다.

### SQL 중심적인 개발의 한계
* 새로운 요구사항에 의해 하나의 테이블을 관계형 데이터베이스에 추가한 경우, 일반적으로 이와 관련된 CRUD 로직 역시 추가해야 한다.
  * 그러나 **SQL 중심적인 개발이라면 이에 맞는 쿼리를 반복적으로 작성해야하는 문제점이 존재**한다.
  * 시간이 지나 프로젝트가 성숙해 감에 따라 테이블이 수십개로 늘어나게 되면, 개발자는 그만큼 반복적인 작업을 하고 있다는 생각을 뿌리치기 힘들게 된다.
* 관계형 데이터베이스를 사용하는 이상, SQL에 의존적인 개발을 피하기는 어려울 수 밖에 없다.

### 관계형 데이터베이스와 객체지향 프로그래밍의 불일치
* 무엇보다도, **관계형 데이터베이스와 객체지향 프로그래밍이 각각 지향하는 바와 패러다임 자체가 다르다**.
  * 관계형 데이터베이스의 본질은 데이터를 잘 정규화하고, 영속화하는 데에 있다.
  * 반면 객체지향 프로그래밍의 본질은 데이터와 기능을 캡슐화하여 여러 이점을 누리는 데에 있다.
* 이렇듯 **패러다임이 다른 두 개념을 하나로 묶어 사용하게 될 경우, 그 불일치성으로 인해 여러가지 어려움을 마주칠 수 밖에 없다**.
  * 예를 들어 엔티티 간에 정의된 상속 관계를 데이터베이스에 1:1로 완벽히 매칭하여 밀어넣기 어렵다.
* 또한, **객체를 관계형 데이터베이스가 이해할 수 있는 정보로 변환하기 위한 SQL은 개발자가 직접 작성해야 한다.**
  * 결국 업무의 대부분의 시간을 소요하는 소모적이고 반복적인 작업을 위해 개발자가 사실상 SQL 매퍼같은 역할을 수행하게 된다.