# Reactive
## 2023-10-25 Wed
### 블로킹 IO란?
```
> 운영체제의 관점에서, IO는 기본적으로 시스템이 외부의 입출력 장치들과 데이터를 주고 받는 것을 의미한다.
```
* 웹 애플리케이션은 일반적으로 동적인 데이터를 처리하기 위해 DB IO나 NW IO 등 어떠한 형태로든 IO가 발생할 수 밖에 없다.
* 이 때, **블로킹 IO로 구성된 애플리케이션은 IO 작업을 처리하는 과정에서 요청 스레드가 차단되어 대기하는 상황이 발생**하게 된다.
    * 예를 들어, NW IO를 사용하는 웹 애플리케이션이 사용자의 요청을 처리하기 위해 외부 서버를 호출할 경우, 응답이 반환될 때까지 요청 스레드는 블로킹된다.
    * 이렇듯 **임의의 스레드가 단지 IO 작업을 위해 차단되어 대기하는 현상을 `Blocking I/O`라는 용어로 지칭**한다.

## 2023-10-26 Thu
### 블로킹 IO와 멀티스레딩 기법
* 상술한 블로킹 IO 방식의 문제점을 보완하기 위해서는 멀티스레딩을 도입하여 추가 스레드를 할당하는 것으로 시간을 최대한 효율적으로 활용할 수 있다.
* 그러나 이렇듯 **CPU의 코어 수 대비 많은 수의 스레드를 할당하는 멀티스레딩 기법은 다음과 같은 문제점**을 갖는다.
  1. 컨텍스트 스위칭으로 인한 스레드 전환 비용: **프로세스의 정보를 PCB에 저장하고, 또 다른 프로세스 정보를 PCB로부터 로드하는 데에 시간이 소요**된다.
  2. 과다한 메모리 사용으로 인한 오버헤드: JVM은 새로운 스레드를 위해 스택의 일부를 할당하므로, 스레드가 늘어날수록 물리적인 메모리 사용량 역시 증가한다.
  3. 스레드 풀로부터의 응답 지연: 스레드 풀에 유휴 스레드가 존재하지 않을 경우, 가용한 스레드가 확보되고 사용 가능한 상태로 전환되기까지 지연이 발생한다.

## 2023-10-27 Fri
### 멀티스레딩 기법의 단점 살펴보기
* 우선, **프로세스의 정보를 PCB에 저장하고 로드하는 동안 CPU는 다른 작업을 수행하지 못하고 대기하기에 컨텍스트 스위칭의 횟수는 성능에 큰 영향**을 준다.
  * 심지어 멀티스레딩 기법은 프로세스 당 다수의 스레드를 실행하므로, 스레드 간에도 컨텍스트 스위칭이 유발된다.
* 다음으로 **서블릿 컨테이너 기반의 Java 웹 애플리케이션은 요청당 하나의 스레드를 생성하므로, 추가 작업을 위한 스레드의 할당은 큰 오버헤드를 유발**시킨다.
  * 예를 들어, 요청 별 작업을 처리하기 위해 스레드를 추가적으로 할당할 경우 메모리 오버헤드는 걷잡을 수 없이 늘어날 수 있다.
* 마지막으로 **`Spring Boot`는 자체적으로 톰캣을 내장하며, 톰캣은 서블릿 컨테이너로서 요청을 효율적으로 처리하기 위해 스레드 풀을 활용**한다.
  * 스레드 풀은 사용자의 요청이 발생할 때마다 스레드를 처음부터 생성하는 대신, 미리 일정 개수의 스레드를 생성하여 사용자의 요청에 대응한다.
  * 그러나 너무 많은 요청이 발생할 경우, 스레드 풀에 가용한 유휴 스레드가 존재하지 않는다면 이로 인해 응답 지연이 발생하기 쉽다.
  * 이 때, 임의의 **사용자 요청을 처리한 후 스레드 풀에 반환된 스레드는 다시 가용해지기까지의 지연 시간을 추가로 소모**한다.

## 2023-10-28 Sat
### 논블로킹 IO란?
```
> 논블로킹 IO는 블로킹 IO와는 달리 스레드를 차단하지 않는다.
```
* **논블로킹 IO를 사용하는 경우, 실제로 작업을 수행하는 스레드의 종료 여부와 관계 없이 작업을 요청한 스레드가 차단되지 않는다**.
  * 또한, **스레드가 차단되지 않는 특징으로 인해 단일 스레드로도 많은 수의 요청을 처리**할 수 있게 된다.
* **논블로킹 IO 방식은 블로킹 IO 방식과 멀티스레딩 기법에 비해 적은 스레드를 사용하므로 상술한 문제에서 자유로우며, CPU 사용량 측면에서도 효율적**이다.
* 반면, 논블로킹 IO 방식은 다음과 같은 상황에서는 좋지 않은 효율을 보여주는 특징을 갖는다.
  1. 스래드 내적으로 **CPU 바운드 작업을 포함하는 경우, 성능에 악영향**을 준다.
  2. 작업 요청에서 완료까지의 전체 흐름 중에 **블로킹 IO 방식이 포함된 경우, 논블로킹 IO 방식만의 장점을 발휘할 수 없다**.