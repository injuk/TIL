# CodingTest
## 2022-02-21 Mon

## 관례적이고 효과적인 용법
* 외국어를 실전에서 사용하려면, 최소한 다음의 세 가지 조건이 충족되어야 한다.
  1. 문법: 언어의 구조에 통달하기
  2. 어휘: 언어에서 표현할 대상의 이름을 알기
  3. 용법: 일상의 이야기를 풀어내는 관례적이고 효과적인 방법
* 프로그래밍 언어도 이와 같아서, 개발자는 언어의 핵심과 어휘, 용법 모두에 숙달되어야 한다.
* 입으로 내 뱉은 말과 달리, 애플리케이션은 계속해서 수정해나갈 수 있다.
  * 즉, 코드는 단순히 동작하고 다른 사람이 읽기 쉬운 데에서 그치면 안 된다.
  * **이상적인 코드는 구조를 수정하기 쉬워야 한다**.
```
> 작은 것은 아름답지만, 단순한 것이 쉬움을 의미하지는 않는다.
```

## 2022-02-22 Tue
## 객체의 생성과 파괴
* 객체는 만들어야할 때, 올바르게 만들어져야 한다.
* 객체는 적시에 파괴되고, 때로는 파괴되기 전에 정리 작업을 수행해야 한다.

### 생성자보다 정적 팩토리 메소드를 활용하기
* 일반적으로 클라이언트 코드가 클래스의 인스턴스를 얻는 방법은 public 생성자이다.
* **개발자는 기존의 public 생성자와 더불어(또는 제외하고) 정적 팩토리 메소드를 클라이언트에게 제공할 수 있다**.
* 정적 팩토리 메소드를 제공하는 경우의 장점은 다음과 같다.
1. 메소드가 이름을 가질 수 있다.
   * **전통적인 생성자와, 파라미터 목록을 전달하는 방식은 매개 변수의 의미를 적절히 설명할 수 없다**.
     * 전통적인 생성자에 매개 변수 목록의 순서를 섞어 새로운 생성자를 정의하는 방식은 이해하거나 기억하기 어렵다.
   * 반면 **정적 팩토리 메소드는 적절한 명명을 통해 매개 변수와 결과의 연관성을 잘 설명할 수 있다**.
   * 만약 **하나의 클래스에서 메소드 시그니쳐가 동일한 여러 생성자가 필요한 경우, 정적 팩토리 메소드와 명시적인 명명을 활용**하자.
2. 필요한 경우, 호출 시점마다 새로운 인스턴스를 생성하지 않을 수 있다.
   * **반복되는 인스턴스와 요청에 같은 인스턴스를 반환하는 방식으로 정적 팩토라 메소드는 인스턴스의 생명 주기를 통제할 수 있다**.
3. 필요한 경우, **정적 팩토리 메소드 반환형의 하위 타입 인스턴스를 반환할 수 있다**.
   * 이러한 방식은 반환할 객체의 클래스를 자유롭게 선택할 수 있도록 유연성을 제공한다.
   * 이를 통해 실제 구현 클래스를 공개하지 않고도 그 실체인 객체를 반환할 수 있으므로, API를 작게 유지할 수 있다.
     * 작아진 API는 개발자의 러닝 커브를 낮추는 직접적인 효과가 있다.
4. 입력된 파라미터에 따라 매 번 다른 클래스의 인스턴스를 반환할 수 있다.
   * 이는 3.의 연장으로, 해당 메소드 반환형의 하위 객체라면 무엇을 반환하든 상관없다는 의미를 갖는다.
   * 예를 들어, EnumSet 클래스는 정적 팩토리 메소드를 호출하여 조건부로 RegularEnumSet 또는 JumboEnumSet을 반환한다.
     * 이 때, 반환 조건은 단순히 전달된 원소의 개수이다.
     * **반환되는 실제 객체가 EnumSet의 구현체이므로 이러한 방식이 가능하며, 클라이언트는 각 구현체에 대해 정확히 알 필요가 없다**.
   * **클라이언트는 정적 팩토리 메소드가 반환하는 인스턴스가 실제로 어떤 구체 클래스인지 알 수 없고, 알 필요도 없다**.
5. **정적 팩토리 메소드를 작성하는 시점에 실제로 반환되는 객체의 클래스가 존재하지 않아도 개발을 진행할 수 있다**.
   * 이로 인해 정적 팩토리 메소드 방식은 매우 유연하다.
* 반면, 정적 팩토리 메소드를 제공하는 경우의 단점은 다음과 같다.
1. 상속을 위해서는 반드시 public 또는 protected 생성자가 필요하지만, 정적 팩토리 메소드를 활용하는 경우 상속을 활용할 수 없을 수도 있다.
   * 그러나 이러한 단점은 상속 대신 컴포지션을 사용하도록 유도하는 장점으로 비추어질 수도 있다.
2. 정적 팩토리 메소드는 개발자가 찾기 어렵다.
   * 정적 팩토리 메소드를 제공하는 클래스의 클라이언트는 인스턴스화 방식을 알아내야만 한다.
   * 이러한 단점을 해소하기 위해, 정적 팩토리 메소드에 일반적으로 사용하는 명명 관습이 존재한다.
* 상술한 정적 팩토리 메소드의 명명 관습은 다음과 같다.
  1. from: 파라미터를 하나만 받고. 해당 타입의 인스턴스를 반환한다.
  2. of: 여러 파라미터를 받고, 적절한 타입의 인스턴스를 반환한다.
  3. create: 매 번 새로운 인스턴스를 생성하여 반환한다.
* public 생성자를 '절대로' 사용하지 말아야 한다는 결론을 내리지 않아야 한다.
  * **두 방식을 적소에 사용하되, 습관적으로 public 생성자를 작성하는 습관은 지양**하도록 한다.
  * **대부분의 경우 정적 팩토리 메소드 방식이 더 많은 장점을 갖는다**.

### 생성자에 매개 변수가 많다면 빌더 패턴을 고려하기
* 정적 팩토리와 생성자는 선택적인 매개 변수가 많은 경우에 대응하기가 어렵다는 단점을 공유한다.
* 개발자들은 이러한 상황에 대응하기 위해 다음과 같은 패턴을 고려하였다.
  1. 매개 변수 목록의 여러 조합으로 생성자를 모두 생성하는 점층적 생성자 패턴
    * 그러나, 당연히 이는 선택적인 매개 변수가 많아질수록 생성자의 개수가 기하급수적으로 늘어날 것이다.
  2. 원하는 매개 변수에 대해 세터를 호츌하는 자바 빈즈 패턴
     * 해당 패턴은 점층적 생성자 패턴의 단점을 상당수 해결한다.
     * 그러나 클래스를 불변으로 만들 수 없으며, 인스턴스 하나를 완성하기 위해 여러 메소드를 호출해야만 한다.
     * 인스턴스를 설정하는 과정에서 인스턴스의 일관성도 유지되지 않는다.
* **빌더 패턴은 점층적 생성자 패턴의 안정성과 자바 빈즈 패턴의 가독성을 겸비한 대안**이다.
* 빌더 패턴으로 작성된 코드는 읽기 쉽고, 작성하기도 쉽다.