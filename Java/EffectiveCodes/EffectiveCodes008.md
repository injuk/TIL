# EffectiveCodes
## 2022-03-12 Sat

## 일반적인 원칙
### 지역변수의 범위는 가능한 한 최소화하기
* **지역변수의 범위를 최소화하면 코드 가독성과 유지보수성은 향상되고, 잠재적인 오류 발생 가능성은 낮아진다**.
* **지역변수의 범위를 줄이는 가장 강력한 방법은 처음 사용될 때 선언하기**이다.
  * **사용하기까지 한참 남은 변수를 미리 선언해두면 코드가 어수선해지고, 변수를 실제로 사용하는 시점에서 타입과 초기값을 잊을 수도** 있다.
* 거의 모든 지역변수는 선언과 동시에 초기화해야 한다.
  * **초기화에 필요한 정보가 충분하지 않다면, 충분해질 때까지 선언을 미뤄야** 한다.
  * 예외적으로, **변수를 초기화하는 표현식에서 검사 예외가 발생할 수 있다면 예외가 메소드 전체에 전파되지 않도록 try 블록 안에서 초기화**한다.
* 부득이하게 try 블록 밖에서도 사용해야 하는 변수 값은 try 블록 밖에서 선언하고 블록 내부에서 초기화한다.
* for 문에서는 반복 변수의 값이 적용되는 범위가 for 키워드와 몸체 내부의 괄호로 재한된다.
  * **따라서 반복 변수의 값을 반복문 종료 후에도 사용해야하는 경우가 아니라면 while 보다는 for 문을 사용**한다.
* **지역변수의 범위를 최소화하는 또 하나의 방법은 메소드를 가능한 한 작게 유지하고, 하나의 기능에만 집중하도록 정의**하는 것이다.
  * 만약 메소드가 여러 기능을 처리한다면, 단순히 메소드를 기능 별로 쪼개도록 한다.

### 전통적인 for 문보다는 향상된 for 문을 사용하기
* 컬렉션을 예로 들어, 반복자나 전통적인 for 문을 활용하는 방식은 인덱스 변수와 반복자를 불필요하게 사용하게 된다.
  * **컬렉션 순회에서 개발자가 정말 원하는 것은 원소의 값 뿐이기 때문**이다.
  * 또한, **매 반복마다 반복자 또는 인덱스를 여러 번 접근해야 하므로 컴파일러가 잡아주지 못하는 잠재적인 오류 발생 가능성이 크다**.
  * 마지막으로, 처리 대상의 종류가 컬렉션과 배열 중 어느 것인지에 따라 코드 형태가 달라진다.
* **이러한 문제는 향상된 for 문을 사용하여 모두 해결**할 수 있다.
  * 반복자와 인덱스를 사용하지 않으므로 가독성이 높아지고, 오류도 발생하지 않는다.
  * 또한, 컬렉션과 배열 어떤 컨테이너를 사용하더라도 같은 문법을 사용하므로 간단하다.
* **향상된 for 문을 사용하더라도 순회 속도는 유지**된다.
* 그러나 **향상된 for 문을 사용할 수 없는 경우도 다음과 같이 분명히 존재**한다.
  1. 컬렉션을 순회하면서 선택한 원소를 제거해야 하는 경우
     * Java 8부터는 Collection의 removeIf를 활용하여 컬렉션을 명시적으로 순회하지 않아도 된다.
  2. 리스트나 배열을 순회하며, 원소의 값 일부 또는 전체를 교체해야 하는 경우에는 반복자나 인덱스를 활용해야 한다.
  3. 여러 컬렉션을 병렬로 순회해야 하는 경우, 각 컬렉션의 반복자나 인덱스 변수를 활용하여 엄격하고 명시적으로 제어해야 한다.
  * 상술한 세 가지 경우에 속하는 경우, 고전적인 for 문을 사용하되 고전적인 for 문의 단점을 경계해야 한다.
* **향상된 for 문은 컬렉션과 배열은 물론이거니와, Iterable 인터페이스를 구현한 객체는 무엇이든 순회가 가능**하다.
  * Iterable 인터페이스는 객체의 원소를 순회하는 반복자를 반환하는 메소드인 iterator 만이 포함된다.

### 향상된 for 문의 결론
* 전통적인 for 문과 비교하여, 향상된 for 문은 가독성이 좋고, 유연하고, 버그 발생 가능성이 낮으며, 성능 저하도 없다.
* **가능한 모든 경우에 전통적인 for 문보다는 향상된 for 문을 적용하는 것이 바람직**하다.