# Java
## 2022-01-07 Fri

### inner class
* 두 클래스 간에 밀접한 관계가 있을 때 사용한다. 사실상 이너 클래스로 작성된 클래스는 아우터 클래스와만 관계를 맺는다.
    * 당연히 이너 클래스는 외부 클래스에서 자주 참조되지 않아야 한다.
* 외부에는 이너 클래스가 감춰지므로 복잡성이 낮아진다.
* 내부 클래스는 클래스 내부의 변수 선언 위치와 유사하다.
    * 인스턴스 클래스: 멤버 변수의 위치에 클래스를 선언한다. 주로 인스턴스 멤버들과 상호 작용을 위해 선언한다.
        * 외부 클래스의 멤버 변수, 스태틱 변수 모두에 접근할 수 있다.
    * 스태틱 클래스: 스태틱 멤버들과의 상호작용을 위해 선언된다.
        * 외부 클래스의 스태틱 멤버에만 접근이 가능하다.
        * 굳이 외부 클래스의 인스턴스 멤버에 접근하려면 별도의 객체 생성 과정이 필요하다.
    * 지역 클래스: 메소드 또는 초기화 블록 안에 선언하며, 선언된 영역에서만 사용이 가능하다.
        * 외부 클래스의 멤버 변수, 스태틱 변수, final로 선언된 지역 변수에만 접근이 가능하다.
            * 메소드가 실행을 마치고 지역 변수가 모두 소멸한 후에 이너 클래스가 해당 변수를 참조하려는 경우가 발생할 수 있기 때문이다.
            * JDK 1.8부터는 지역 클래스가 접근하는 지역 변수는 final을 생략해도 컴파일러가 자동으로 붙여주도록 변경되었다.
* 이너 클래스 또한 아우터 클래스의 멤버이므로 접근 제어자를 붙여 사용할 수 있다.
* **완전히 다른 클래스에서 이너 클래스에 접근하려는 경우는 외부로 빠져야할 클래스가 이너 클래스로 포함된 잘못된 설계**에 해당한다.
* 컴파일시 .java 소스로부터 생성되는 .class 파일의 이름 형식은 Outer$Inner.class의 형식이며, 다음과 같다.
```
Outer.class
Outer$Inner.class
Outer$1LocalInner.class
// Local Inner 클래스는 지역 변수와 같이 여러 메소드에서 동일한 이름이 존재할 수 있으므로 클래스 명 앞에 숫자가 붙는다.
```
* 아우터 클래스와 이너 클래스에 동일한 이름의 변수가 존재하는 경우, [아우터 클래스명].this.[변수 이름]으로 참조할 수 있다.
    * this.[변수 이름]은 이너 클래스의 변수를 참조한다.

### 익명 클래스
* 일회용으로 사용되는 클래스이다.
* 익명 클래스는 생성자조차 가질 수 없으므로, 부모 클래스 또는 인터페이스의 이름을 통해 다음과 같은 형식으로 선언한다.
    * 이 때, 컴파일 된 결과는 [아우터 클래스명]$[숫자].class이다. 익명 클래스는 이름이 없기 때문이다!
```
new [부모클래스이름](){ // 멤버 선언 }
new [인터페이스이름](){ // 멤버 선언 }
```
* 위와 같은 형태의 한계로 익명 클래스는 둘 이상의 인터페이스를 구현할 수 없다.
* 아래의 예시는 Temp 인터페이스를 통해 익명 클래스를 한 번 사용하는 예시이다.
```
class Main {
  public static void main(String[] args) {
    
    TempClass temp = new TempClass();
    temp.hello(new Impl()); // 일반적인 방식
    temp.hello(new Temp() { // 익명 클래스를 사용한 예시
        public void say() {
            System.out.println("Byeeeee");
        }
    });
  }
}
class TempClass {
    public void hello(Temp t) {
        t.say();
    }
}

interface Temp {
    public void say();
}
class Impl implements Temp {
    public void say() {
        System.out.println("Hellooooo");
    }
}
/* 실행 결과
Hellooooo
Byeeeee
*/
```