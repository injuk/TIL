# Basics
## 2022-06-11 Sat

### 스프링 웹 개발의 기초
* 웹 개발은 크게 세 가지 분류로 나누어볼 수 있다.
  1. 정적 컨텐츠 제공: 서버가 웹 브라우저에 HTML 파일 등을 그대로 제공한다.
  2. MVC와 템플릿 엔진: 가장 많이 사용되는 방식이며, Controller / Model / View 로 분류하여 개발을 진행한다.
     * 예를 들어 PHP와 JSP는 대표적인 템플릿 엔진이며, HTML 등을 동적으로 생성하여 반환한다.
     * 정적 컨텐츠의 경우, 파일 자체를 웹 브라우저에 반환한다는 차이점이 존재한다.
     * 반면, MVC와 템플릿 엔진은 서버에서 HTML에 변형을 가하여 반환한다.
  3. API: 서버는 요청 수신시 요청에 대한 처리 결과로 JSON 문서 형태의 데이터를 생성하고, 이를 클라이언트에게 반환한다. 
     * 최근에는 React나 Vue.js를 사용할 때에도 클라이언트에게 API를 통해 데이터만 내려주면 클라이언트가 알아서 화면을 렌더링한다.
     * 또한, **서버 끼리의 통신 시에도 HTML을 주고받을 필요가 없으므로 데이터에 집중하는 API 방식을 활용**한다.

### 정적 컨텐츠 제공
* **스프링의 경우, URI에 정적 파일이 요청된 경우 이를 자동으로 `resources/static` 디렉토리에서 찾는다**.
  * 해당 경로에 파일을 생성한 후, 웹 브라우저에 `localhost:8079/[정적파일이름]`을 작성하여 접근할 수 있다.
  * 이렇듯 **정적 파일을 반환하는 것은 간단하지만, 어떠한 프로그래밍적인 요소를 추가할 수는 없다**.
* `localhost:8079/[정적파일이름]` 경로로 요청한 경우, 스프링은 다음과 같은 흐름으로 동작하여 반환한다.
  1. 내장 톰캣 서버가 요청을 수신한다.
  2. 내장 톰캣 서버는 스프링 컨테이너에 해당 요청을 포워딩한다.
     * 이 때, 내장 톰캣 서버는 어떠한 경로로 요청이 수신되었는지를 분류해주는 역할을 수행한다.
  3. 스프링 컨테이너는 우선 컨트롤러에서 해당 경로가 있는지 확인하지만, 이 경우에는 정적 파일에 대응되는 경로를 찾지 못한다.
     * 즉, **컨트롤러의 우선 순위가 더 높다.**
  4. 스프링은 `resouces/static` 경로에서 동명의 파일이 존재하는지 확인한다.
  5. 해당 정적 파일을 발견할 수 있으므로, 이를 그대로 웹 브라우저에 반환한다.

### MVC와 템플릿 엔진
* MVC는 Model, View, Controller의 약자이다.
  * 이전에는 View와 Controller가 별도로 분리되지 않은 모델을 사용하였다.
  * 그러나 **역할과 책임의 관점에서 View는 화면을 렌더링하는 데에만 집중해야하며, Model과 Contoller는 비즈니스 로직과 관련**이 깊다.
  * 때문에 세 역할을 분리한 MVC 패턴이 고안되었으며, 이는 현재의 실무에서도 자주 채택되는 패턴이다.
* MVC 컨트롤러에 정의된 경로로 요청한 경우, 스프링은 다음과 같은 흐름으로 동작하여 반환한다.
  1. 내장 톰캣 서버가 클라이언트의 요청을 수신한다.
     * 이 때, 내장 톰캣 서버는 어떠한 경로로 요청이 수신되었는지를 분류해주는 역할을 수행한다.
  2. 스프링 컨테이너는 우선 컨트롤러에서 해당 경로가 있는지 확인하며, @GetMapping 등에 의해 매핑되는 메소드를 찾아낸다.
  3. 찾아낸 메소드를 호출하며, 해당 메소드는 템플릿 이름을 가리키는 String과 Model을 스프링 컨테이너에 반환한다.
  4. **스프링 컨테이너는 적절한 View를 찾아 템플릿 엔진과 연결해주는 역할을 수행하는 viewResolver에게 정보를 전달**한다.
  5. **viewResolver는 templates 디렉토리에서 적절한 View를 찾아내고, 템플릿 엔진에게 해당 View에 대한 처리를 요청**한다.
  6. **템플릿 엔진은 해당 View에 대한 렌더링을 수행하고, 처리가 완료된 HTML을 웹 브라우저에 반환**한다.
     * 정적 컨텐츠 제공의 경우, 변환 과정 없이 그대로 파일을 반환했다는 점과 차이가 있다.