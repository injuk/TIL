# EffectiveCodes
## 2023-05-06 Sat
### 여러 개의 처리 단계를 갖는 경우에는 시퀀스를 활용하기
```
> 하나 이상의 처리 단계를 포함하는 컬렉션 처리의 경우, 시퀀스는 이터러블과 비교했을 때 일반적으로 약 20 ~ 40%의 성능 향상을 보인다.
```
* **이터러블과 시퀀스는 동일한 생김새의 인터페이스를 갖지만, 실제로는 서로 완전히 다른 목적으로 설계되었기에 서로 다른 방식으로 동작**한다.
  * 대표적으로, 매 처리 단계마다 새로운 이터러블을 반환하는 이터러블과 달리 시퀀스는 지연 처리를 위한 데코레이터를 반환한다.
  * 때문에 컬렉션 처리 연산은 호출 시마다 연산을 수행하는 반면, 시퀀스 처리 함수는 `최종 연산`이 발생하기 전까지 연산을 수행하지 않는다.
* 지연 처리를 목적으로 하는 시퀀스의 특징은 다음과 같은 장점을 갖는다.
  1. 자연스러운 처리 순서를 유지한다.
  2. 연산 횟수를 최소화한다.
  3. 무한 시퀀스 개념을 적용할 수 있다.
  4. 각 단계에서 새로운 컬렉션을 반환하지 않는다.

### 자연스러운 처리 순서란?
* **요소 전체를 대상으로 연산 단계를 진행하는 이터러블과 달리, 시퀀스는 요소 마다 지정한 연산을 한 번에 적용하는 식으로 동작**한다.
  * 덧붙여 이러한 시퀀스의 처리 방식은 lazy order로 지칭되는 반면, 이터러블의 처리 방식은 eager order 라는 표현을 사용한다.
* 컬렉션에 대한 처리를 고전적인 반복문을 통해 구현할 경우, 일반적으로 lazy order로 구현되므로 시퀀스 처리는 '자연스러운' 처리 순서를 갖는 것과 같다.
  * 나아가 단순 반복문과 조건문을 활용하는 것과 유사하게 동작하는 시퀀스 처리에는 근미래에 저수준의 최적화가 적용될 것을 기대할 수 있다.