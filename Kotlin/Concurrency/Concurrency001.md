# Concurrency
## 2023-07-14 Fri
### 프로세스와 스레드
```
> 애플리케이션을 시작하면, OS는 프로세스를 생성하고 메인 스레드를 연결한 후에 이를 시작한다.
> 코틀린의 경우 기본적으로 개발자가 직접 스레드를 관리할 필요 없으며, 대신 짧은 코드로 코틀린이 스레드나 스레드 풀을 생성하여 코루틴을 실행하도록 지시한다.
```
* 프로세스란 실행 중인 애플리케이션 자체의 인스턴스이며, PID나 네트워크 연결 등의 상태를 가질 수 있다.
    * 또한, 해당 프로세스 내부에서 동작하는 스레드는 프로세스의 상태에 접근할 수 있다.
    * 나아가 브라우저를 예로 들어, 하나의 애플리케이션은 때로 여러 프로세스로 구성될 수도 있다.
* 스레드 중 **실행 스레드는 프로세스가 실행할 일련의 명령을 포함하며, 프로세스는 최소한 하나의 스레드를 포함**한다.
    * 이 때, main과 같은 애플리케이션 진입점을 실행하는 스레드를 메인 스레드라고 지칭한다.
    * 또한, 각 스레드는 프로세스의 리소스에 접근할 수 있으며 나아가 스레드 자체의 저장소도 갖는다.
* **스레드 내부의 명령은 한 번에 하나씩 실행되며, 긴 작업의 경우 스레드가 블록되므로 UI 스레드는 블로킹되지 않도록 구현해야 한다**.
    * 대신 **각각의 스레드가 서로 통신할 수 있는 점을 이용하여 별도의 스레드에 블로킹 작업을 할당하는 것이 바람직**하다.
    * 일반적으로, **스레드는 메인 스레드와 백그라운드 스레드로 나누어 지칭**할 수 있다.

## 2023-07-15 Sat
### 그리고 코루틴
```
> 코루틴은 대부분의 스레드와 마찬가지로 실행할 명령어 집합의 실행을 정의하므로 경량 스레드로도 지칭할 수 있다.
> 스레드와 코루틴의 가장 큰 차이점은 비용으로, 코루틴은 스레드보다 빠르고 적은 비용으로 생성할 수 있다.
> 스레드는 한 시점에 하나의 코루틴만을 실행할 수 있으므로, 프레임워크는 코루틴을 적절하게 스레드 간에 옮기는 역할을 수행한다.
```
* **코루틴은 스레드 안에서 실행되며, 스레드 하나에 다수의 코루틴이 존재할 수 있으나 하나의 스레드에서는 한 시점에 하나의 명령만이 실행**될 수 있다.
* **코틀린은 고정된 크기의 스레드 풀을 사용하며, 코루틴을 각 스레드에 배포하므로 많은 코루틴을 생성하더라도 실행시간은 적게 증가**한다.
* **코루틴은 일시 중단될 수 있으며, 중단된 동안 현재 실행 중인 스레드는 다른 코루틴을 실행하는데 사용**된다.
  * 이 때, 코루틴은 시작 또는 재개 가능한 상태로 전이될 수 있다.
* **코루틴은 임의의 스레드에서 시작되었더라도 해당 스레드와 결합되지는 않으며, 실행이 중지되었던 코루틴은 다른 스레드에서 재개될 수도 있다**.
  * 이는 **코틀린이 실행 가능한 스레드로 코루틴을 이동시키는 식으로 동작하기 때문에 가능**하다.

## 2023-07-16 Sun
### 프로세스와 스레드, 그리고 코루틴
* 상술한 바와 같이, 애플리케이션은 하나 이상의 프로세스로 구성되며 프로세스 역시 하나 이상의 스레드로 구성된다.
  * 이 때, 스레드가 블록될 경우 해당 스레드의 코드 실행은 일시적으로 중단된다.
* **코루틴은 기본적으로 스레드 안에 존재하는 경량 스레드이나, 스레드와 결합되지는 않으므로 필요에 따라 다른 스레드로 옮겨져 재개될 수 있다**.
  * 이 때, 동시성은 둘 이상의 스레드가 생성되었을 때 발생할 수 있으며 스레드 간의 통신 및 동기화를 필요로 한다.