# Kotlin
## 2022-02-05 Sat

## about Kotlin
* Kotlin 초기의 요구사항은 다음과 같았다.
  1. 정적 타입 지정 언어
  2. Java와 100% 호환되는 언어
     * Java와의 상호 운용성은 Kotlin의 가장 큰 주춧돌이다.
  3. 언어를 위한 도구 개발이 쉬운 언어
  4. 배우기 쉽고 뜻을 파악하기 쉬운 언어
* Kotlin은 Java 플랫폼에서 돌아가는 새로운 프로그래밍 언어이다.
  * 때문에 Kotlin은 기존 Java 라이브러리 또는 프레임워크와 함께 잘 동작하며, 비슷한 수준의 성능을 보장한다.
  * Java 언어를 활용하는 환경 중 대다수는 Kotlin을 도입할 경우 더 적은 코드로 더 편하게 개발 목표를 달성할 수 있다.
* Kotlin의 주 목적은 다음과 같다.
```
> 현재 Java가 사용되고 있는 모든 용도에 적합하면서도,
> 더 간결하고 생산적이며,
> 안전한 대체 언어를 제공하는 것
```

## 프로그래밍 언어로서의 Kotlin 특성
### 정적 타입 지정 언어
* **Kotlin은 Java와 마찬가지로 정적 타입 지정 언어**이다.
  * 때문에 **모든 프로그램 구성 요소의 타입을 컴파일 시점에 알 수 있다**.
  * 나아가 **프로그램 안에서 객체의 필드나 메소드를 사용할 경우, 컴파일러가 타입을 검증**한다.
* 반면 동적 타입 언어에서는,
  1. 타입과 관계 없이 모든 값을 변수에 넣을 수 있고,
  2. 메소드나 필드 접근에 대한 검증이 실행 시점에 발생하며,
  3. 덕분에 코드를 더 짧고 유연하게 작성할 수 있지만,
  4. 간단한 실수로 인한 오류도 컴파일 시점에 걸러내지 못하고 실행 시점에 발생한다.
* 이에 따라 정적 타입 지정 언어는 성능과 신뢰성, 유지보수성 측면에서의 이점이 있다.
  * 성능은 왜? 실행 시점에 어떠한 메소드를 호출해야 하는지 알아내는 과정이 필요 없으므로, 메소드 호출이 빠르다.
* Kotlin은 Java와 달리 모든 변수의 타입을 반드시 개발자가 명시할 필요가 없다.
  * 타입추론: **Kotlin 컴파일러는 문맥으로부터 변수의 타입을 자동으로 유추**한다.
* Java와 달리, Kotlin은 null이 될 수 있는 타입인 nullable type을 지원한다.

### 함수형 프로그래밍과 객체지향 프로그래밍
* 함수형 프로그래밍의 핵심 개념은 일급 시민으로서의 함수, 불변성, 순수 함수로 인한 부수 효과 배제이다.
* 함수형 스타일로 작성된 프로그램은,
  1. 명령형 코드에 비해 간결하며 우아하고,
  2. 일급 시민으로서의 함수로부터 기인한 더 강력한 추상화를 적용하여 코드 중복을 막을 수 있고,
  3. 불변성과 순수 함수로 인해 다중 스레드에도 안전하며,
  4. 테스트가 간단한 이점이 있다.
* 함수형 프로그래밍은 프로그래밍 스타일일 뿐이지만, 모든 언어가 함수형 프로그래밍을 적용하기에 적절한 라이브러리와 문법을 지원하지 않는다.
  * Java 역시 Java 8부터 함수형 프로그래밍을 지원할 수 있는 기능이 출시되었다.
* **Kotlin은 처음부터 함수형 프로그래밍을 지원할 수 있도록 다음과 같이 설계**되었다.
  1. **함수 타입을 지원하므로 함수가 다른 함수를 파라미터로 받거나, 새로운 함수를 반환할 수 있다**.
  2. **람다식을 지원하므로 번거로운 준비 코드의 작성 없이 코드 블록을 쉽게 정의하고 전달**할 수 있다.
  3. **데이터 클래스는 불변적인 값 객체를 간편하게 만들 수 있는 구문을 제공**한다.
  4. **Kotlin의 표준 라이브러리는 객체와 컬렉션을 함수형 스타일로 다룰 수 있는 API를 제공**한다.
* Kotlin은 함수형 프로그래밍을 지원하지만, 강제하지는 않는다.
  * 따라서 Kotlin을 활용하여 코드를 작성할 때에는 객체 지향과 함수형 프로그래밍을 조합하여 적합한 도구를 선택할 수 있다.

### Java와 Kotlin의 비교
1. Java 개발자들은 수년간 Java로 개발해오면서, 여러 종류의 애플리케이션 개발에 도움을 줄 수 있는 라이브러리와 프레임워크를 만들어왔다.
   * 이런 환경에서 Kotlin은 Java와 매끄럽게 상호 운용할 수 있다.
   * Kotlin은 신규 컴포넌트를 작성하거나, 기존 서비스 코드를 Kotlin으로 이식하는 경우 모두에 잘 맞는다.
   * 그러면서도 **코드는 더욱 간결해지고, 신뢰성과 유지보수성이 높아질 것**이다.
2. Kotlin을 사용하더라도 성능 측면에서 손해가 없다.
   * Kotlin 컴파일러가 생성한 바이트코드는 일반적인 Java 바이트코드와 똑같이 효율적으로 실행된다.
   * 컴파일 후 패키징된 애플리케이션의 크기도 Java 애플리케이션에 비해 크게 늘어나지 않는다.
   * 람다를 사용해도 새로운 객체가 만들어지지 않으므로, 객체 증가에 따른 GC가 자주 일어나지 않는다.

## Kotlin의 철학
### Kotlin 언어의 실용성
1. Kotlin은 실제 문제를 해결하기 위해 실용성에 초점을 둔 언어이다.
2. **Kotlin은 연구를 위한 언어가 아니다**.
   * 대신 Kotlin은 다른 언어들에 의해 이미 성공적으로 검증된 해법과 기능에 의존한다.
   * 덕분에 Kotlin의 언어적 복잡도는 줄어들고, 개발자가 이미 알고 있는 기존의 개념을 통해 쉽게 배울 수 있다.
3. Kotlin은 특정한 프로그래밍 스타일과 패러다임을 강요하지 않는다.
4. **생산성에 있어 좋은 언어만큼이나 편리한 개발 환경은 큰 영향을 주므로, Kotlin은 도구를 강조**한다.
   * Kotlin은 개발 단계에서 IntellJ와의 상호작용을 염두에 두고 설계되었다.
   * IDE는 Kotlin 언어 자체를 지원하며, 더 간단하게 작성할 수 있는 코드 패턴을 IDE가 자동으로 감지하여 권장한다.
   * 이러한 수정 안내를 통해 개발자는 Kotlin의 언어적 특성을 이해하며, 이를 자신의 코드에 적용할 수 있다.

### Kotlin 언어의 간결성
* 개발자는 코드를 새로 작성하는 시간보다 기존 코드를 읽는 시간이 훨씬 길다.
  * 때문에 코드가 간결하다면, 읽어야 하는 코드의 내용을 파악하기가 더 쉬울 것이다.
1. Kotlin은 개발자가 작성하는 보일러 플레이트 코드를 줄이기 위해 많은 노력을 기울였다.
   * **Kotlin은 getter, setter, 생성자 파라미터를 필드에 대입하는 로직 등의 번거로운 준비 코드를 암시적으로 지원**한다.
2. Kotlin은 기능이 다양한 표준 라이브러리를 제공하므로, 반복되거나 길어질 수 있는 코드를 라이브러리 함수 호출로 대체한다.
   * 예를 들어, Java의 경우 컬렉션에서 원소를 찾는 것과 같은 일반적인 작업을 위해 명시적으로 작성해야 하는 코드의 양이 길다.
3. Kotlin의 소스 코드를 최대한 짧게 만드는 것은 Kotlin의 설계 목표가 아니다.
   * 예를 들어, Kotlin은 연산자 오버로딩은 지원하지만 사용자가 새로운 연산자를 정의할 수는 없다.
   * 때문에 개발자들은 암호문과 같은 형식으로 코드를 작성할 수 없다.
   * 암호문보다는 단어로 이루어진 이름이 훨씬 가독성이 좋다.
4. 상술한 특징으로 인해, **간결한 언어인 Kotlin은 코드 작성 시간은 물론 코드를 읽는 시간도 단축**시킨다.
    * 간결성은 개발자의 생산성을 향상시키고, 프로젝트 진행 시간을 단축시킨다.

### Kotlin 언어의 안전성
* 일반적으로 안전한 언어는 프로그램에서 발생할 수 있는 일부 유형의 오류를 프로그램 설계 자체가 원천적으로 방지한다는 의미를 갖는다.
* 물론 이는 절대적이지 않으며, 언어의 안전성과 생산성 사이에는 tradeoff 관계가 성립한다.
  * 컴파일러가 많은 오류를 막을 수 있으려면 컴파일러에게 많은 정보를 제공해야 하므로, 생산성이 저하될 것이다.
1. Kotlin은 JVM에서 동작된다는 점 만으로도 상당한 안정성을 보장한다.
   * JVM은 메모리 안전성을 보장한다.
   * JVM은 버퍼 오버플로우를 방지한다.
2. **Kotlin은 Java보다 더 적은 비용으로 타입 안정성을 제공**할 수 있다.
   * 이는 대부분의 경우에 Kotlin 컴파일러가 타입을 자동으로 추론하기 때문이다.
3. **Kotlin은 실행 시점에 오류를 발생시키는 대신 컴파일 시점에 검사를 진행하여 더 많은 오류를 사전에 방지**한다.
   * 예를 들어, Kotlin은 NullPointerException을 방지하기 위해 많은 노력을 기울인다.
   * **Kotlin은 null이 될 수 있는 값과 될 수 없는 값을 구분하여 추적**한다.
4. **Kotlin은 ClassCastException을 방지**한다.
   * Java에서는 개발자의 게으름으로 인해 타입 검사와 타입 캐스팅에서 타입 검사가 누락되는 경우가 많다.
   * **Kotlin에서는 is 연산자만으로 타입을 검사하고, 검사에 통과된 객체는 타입 캐스팅 없이 해당 타입의 메소드나 필드를 사용할 수 있다**.
     * 즉, **Kotlin에서는 타입 검사와 타입 캐스팅이 하나의 연산자에 의해 이루어진다**.
   * 때문에 Kotlin에서는 타입 검사를 누락할 이유도 없고, 이로 인한 오류가 발생할 일도 없다.

### Kotlin 언어의 상호운용성
1. **Kotlin은 Java의 기존 라이브러리를 그대로 사용할 수 있다**.
2. 일부 JVM 언어와 달리, Kotlin은 Java와 함께 사용하기 위해 어떠한 노력도, 장치도 필요 없다.
   * 덕분에 Java와 Kotlin을 혼용하는 프로젝트에서 마음대로 섞어 사용하는 유연성을 발휘할 수 있다.
3. Kotlin은 Java의 기존 라이브러리를 최대한 활용한다.
   * 예를 들어, Kotlin은 자체 컬렉션 라이브러리를 제공하는 것보다 Java 표준 라이브러리에 의존한다.
   * 대신 Kotlin에서는 Java 표준 라이브러리를 더 쉽게 사용할 수 있도록 몇 가지 기능을 더한다.
4. **Java에서 Kotlin API를 호출하거나, 그 역방향 호출에서도 아무런 변환 과정이 필요 없다**.
5. Kotlin은 Java와 소스 파일이 임의로 섞여 있더라도 프로그램을 컴파일 할 수 있다.
   * 이 과정에서, 각 **소스 파일들의 의존성 관계가 어떻게 구성되어 있든 컴파일이 가능**하다.

### Kotlin 코드의 컴파일
* Kotlin 소스 코드의 확장자는 .kt이다.
* Kotlin 컴파일러는 이를 컴파일하여 .class 파일을 생성한다.
  * kotlinc 명령어를 통해 직접 컴파일할 수 있다.
* **Kotlin 컴파일러로 컴파일된 코드는 Kotlin 런라팀 라이브러리에 의존**한다.
  * 런타임 라이브러리에는 Kotlin 자체 표준 라이브러리 클래스와, Kotlin에서 Java API의 기능을 확장한 내용이 포함된다.
* **Kotlin으로 개발된 애플리케이션을 배포할 때에는 Kotlin 런타임 라이브러리도 함께 배포되어야 한다**.
  * 메이븐이나 그래들을 사용하는 경우, 애플리케이션 패키지 과정에서 Kotlin 런타임을 알아서 포함시킨다.

### 결론
* 따라서 Kotlin은 실용적이며 안전하고, 간결하고 상호운용성을 보장한다.
* 이는 Kotlin의 설계 단계에서,
  1. 일반적인 작업에 대해서는 잘 알려진 해법을 채택하고,
  2. NullPointerException과 같이 흔히 발생하는 오류를 방지하고,
  3. 읽기 쉽고 간결한 코드를 지원하면서도 Java와 아무런 제약 없이 통합될 수 있는 언어를 설계하는데에 초점을 맞췄다는 의미이다.